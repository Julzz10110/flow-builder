{"version":3,"file":"js/app.fa8df610.js","mappings":"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","sources":["webpack://flow-builder/./src/types/nodesConfig.ts","webpack://flow-builder/./src/components/icons/pathsData.js","webpack://flow-builder/./src/components/icons/CustomIcon.vue","webpack://flow-builder/./src/components/icons/CustomIcon.vue?79eb","webpack://flow-builder/./src/components/ToolPanel.vue?ed4a","webpack://flow-builder/./src/components/ToolPanel.vue","webpack://flow-builder/./src/components/ToolPanel.vue?cff6","webpack://flow-builder/./src/components/NodeContextMenu.vue?5592","webpack://flow-builder/./src/components/NodeContextMenu.vue","webpack://flow-builder/./src/components/NodeContextMenu.vue?e61d","webpack://flow-builder/./src/components/NodeSelectionMenu.vue?623f","webpack://flow-builder/./src/components/NodeSelectionMenu.vue","webpack://flow-builder/./src/components/NodeSelectionMenu.vue?6f94","webpack://flow-builder/./src/components/FlowBuilder.vue?9a23","webpack://flow-builder/./src/components/FlowBuilder.vue","webpack://flow-builder/./src/components/FlowBuilder.vue?bc76","webpack://flow-builder/./src/App.vue?2a5e","webpack://flow-builder/./src/App.vue","webpack://flow-builder/./src/App.vue?7ccd","webpack://flow-builder/./src/directives/clickOutside.js","webpack://flow-builder/./src/main.ts","webpack://flow-builder/webpack/bootstrap","webpack://flow-builder/webpack/runtime/chunk loaded","webpack://flow-builder/webpack/runtime/compat get default export","webpack://flow-builder/webpack/runtime/define property getters","webpack://flow-builder/webpack/runtime/global","webpack://flow-builder/webpack/runtime/hasOwnProperty shorthand","webpack://flow-builder/webpack/runtime/make namespace object","webpack://flow-builder/webpack/runtime/jsonp chunk loading","webpack://flow-builder/webpack/startup"],"sourcesContent":["export type NodeParamType = 'string' | 'number' | 'boolean';\r\n\r\nexport interface NodeParamConfig {\r\n  name: string;\r\n  type: NodeParamType;\r\n  required?: boolean;\r\n  default?: any;\r\n  enum?: string[];\r\n}\r\n\r\nexport interface NodeConfig {\r\n  name: string;\r\n  params: NodeParamConfig[];\r\n}\r\n\r\nexport interface NodesConfig {\r\n  [category: string]: NodeConfig[];\r\n}\r\n\r\nconst config: NodesConfig = {\r\n  proc: [\r\n    {\r\n      name: \"comparison\",\r\n      params: [\r\n        {\r\n          name: \"propertyName\",\r\n          type: \"string\",\r\n          required: true\r\n        },\r\n        {\r\n          name: \"order\",\r\n          type: \"string\",\r\n          enum: [\"<\", \">\"],\r\n          required: true,\r\n          default: \"<\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      name: \"iterate\",\r\n      params: [\r\n        {\r\n          name: \"print\",\r\n          type: \"boolean\",\r\n          default: true\r\n        }\r\n      ]\r\n    }\r\n  ],\r\n  bx24: [\r\n    {\r\n      name: \"get_deals\",\r\n      params: []\r\n    },\r\n    {\r\n      name: \"get_deal_by_id\",\r\n      params: [\r\n        {\r\n          name: \"id\",\r\n          type: \"string\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n};\r\n\r\nexport default config;","export const pathsData = {\r\n    // viewBox = '0 0 16 16'\r\n    question: [\r\n        {\r\n            d: 'M8 2C6.346 2 5 3.346 5 5a.75.75 0 0 0 1.5 0c0-.826.674-1.5 1.5-1.5s1.5.674 1.5 1.5c0 .653-.122 1.018-.254 1.25c-.137.242-.321.41-.601.643l-.051.042c-.26.215-.612.507-.88.939c-.3.483-.464 1.08-.464 1.876v.5a.75.75 0 0 0 1.5 0v-.5c0-.579.116-.888.239-1.085c.136-.219.316-.37.616-.62c.283-.236.66-.553.945-1.053c.29-.51.45-1.145.45-1.992c0-1.654-1.346-3-3-3zm0 12.25a1 1 0 1 0 0-2a1 1 0 0 0 0 2z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Question16Filled\r\n    settings: [\r\n        {\r\n            d: 'M2.267 6.153A5.986 5.986 0 0 1 3.53 3.98a.355.355 0 0 1 .382-.095l1.36.484a.71.71 0 0 0 .935-.538l.26-1.416a.354.354 0 0 1 .274-.282a6.072 6.072 0 0 1 2.52 0c.14.03.248.141.274.282l.26 1.416a.708.708 0 0 0 .935.538l1.36-.484a.355.355 0 0 1 .382.095c.569.627 1 1.367 1.262 2.173a.352.352 0 0 1-.108.378l-1.102.931a.703.703 0 0 0 0 1.076l1.102.931c.11.093.152.242.108.378a5.985 5.985 0 0 1-1.262 2.173a.355.355 0 0 1-.382.095l-1.36-.484a.71.71 0 0 0-.935.538l-.26 1.416a.353.353 0 0 1-.275.282a6.068 6.068 0 0 1-2.519 0a.354.354 0 0 1-.275-.282l-.259-1.416a.708.708 0 0 0-.935-.538l-1.36.484a.355.355 0 0 1-.382-.095a5.986 5.986 0 0 1-1.262-2.173a.352.352 0 0 1 .108-.378l1.102-.931a.704.704 0 0 0 0-1.076l-1.102-.931a.352.352 0 0 1-.108-.378zM6.25 8a1.75 1.75 0 1 0 3.5 0a1.75 1.75 0 0 0-3.5 0z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Settings16Filled\r\n    plus: [\r\n        {\r\n            d: 'M8.5 2.75a.75.75 0 0 0-1.5 0V7H2.75a.75.75 0 0 0 0 1.5H7v4.25a.75.75 0 0 0 1.5 0V8.5h4.25a.75.75 0 0 0 0-1.5H8.5V2.75z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Add16Filled\r\n    play: [\r\n        {\r\n            d: 'M6.235 2.192A1.5 1.5 0 0 0 4 3.499v9a1.5 1.5 0 0 0 2.235 1.308l8-4.5a1.5 1.5 0 0 0 0-2.615l-8-4.5z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Play16Filled\r\n    pause: [\r\n        {\r\n            d: 'M3.5 2A1.5 1.5 0 0 0 2 3.5v9A1.5 1.5 0 0 0 3.5 14h2A1.5 1.5 0 0 0 7 12.5v-9A1.5 1.5 0 0 0 5.5 2h-2zm7 0A1.5 1.5 0 0 0 9 3.5v9a1.5 1.5 0 0 0 1.5 1.5h2a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 12.5 2h-2z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Pause16Filled\r\n    delete: [\r\n        {\r\n            d: 'M10 4h3a.5.5 0 0 1 0 1h-.553l-.752 6.776A2.5 2.5 0 0 1 9.21 14H6.79a2.5 2.5 0 0 1-2.485-2.224L3.552 5H3a.5.5 0 0 1 0-1h3a2 2 0 1 1 4 0zM8 3a1 1 0 0 0-1 1h2a1 1 0 0 0-1-1zM6.5 7v4a.5.5 0 0 0 1 0V7a.5.5 0 0 0-1 0zM9 6.5a.5.5 0 0 0-.5.5v4a.5.5 0 0 0 1 0V7a.5.5 0 0 0-.5-.5z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Delete16Filled\r\n    refresh: [\r\n        {\r\n            d: 'M3 8a5 5 0 0 1 9-3H9.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 .5-.5v-.657V2.5a.5.5 0 0 0-1 0v1.028A6 6 0 1 0 14 8a.5.5 0 0 0-1 0A5 5 0 0 1 3 8z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:ArrowClockwise16Regular\r\n    code: [\r\n        {\r\n            d: 'M9.803 3.043a.5.5 0 0 1 .254.66l-4 9a.5.5 0 0 1-.914-.406l4-9a.5.5 0 0 1 .66-.254zm-5.47 2.333a.5.5 0 0 1 .04.706L2.67 8l1.705 1.918a.5.5 0 1 1-.748.664l-2-2.25a.5.5 0 0 1 0-.664l2-2.25a.5.5 0 0 1 .706-.042zm7.335 0a.5.5 0 0 1 .706.042l2 2.25a.5.5 0 0 1 0 .664l-2 2.25a.5.5 0 1 1-.748-.664L13.331 8l-1.705-1.918a.5.5 0 0 1 .042-.706z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Code16Regular\r\n    download: [\r\n        {\r\n            d: 'M3.5 13h9a.75.75 0 0 1 .102 1.493l-.102.007h-9a.75.75 0 0 1-.102-1.493L3.5 13h9h-9zM7.898 1.007L8 1a.75.75 0 0 1 .743.648l.007.102v7.688l2.255-2.254a.75.75 0 0 1 .977-.072l.084.072a.75.75 0 0 1 .072.977l-.072.084L8.53 11.78a.75.75 0 0 1-.976.073l-.084-.073l-3.536-3.535a.75.75 0 0 1 .977-1.133l.084.072L7.25 9.44V1.75a.75.75 0 0 1 .648-.743L8 1l-.102.007z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:ArrowDownload16Filled\r\n    upload: [\r\n        {\r\n            d: 'M3.75 2a.75.75 0 0 0 0 1.5h8.5a.75.75 0 0 0 0-1.5h-8.5zm4.78 2.72a.75.75 0 0 0-1.06 0L4.22 7.97a.75.75 0 0 0 1.06 1.06l1.97-1.97v6.19a.75.75 0 0 0 1.5 0V7.06l1.97 1.97a.75.75 0 1 0 1.06-1.06L8.53 4.72z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:ArrowUpload16Filled\r\n    edit: [\r\n        {\r\n            d: 'M13.416 2.584c.778.778.778 2.039 0 2.817L6.058 12.76c-.319.32-.719.546-1.156.655l-2.283.57a.498.498 0 0 1-.604-.603l.57-2.283a2.49 2.49 0 0 1 .656-1.156l7.358-7.358a1.992 1.992 0 0 1 2.817 0zM9.894 4.697l-5.949 5.949a1.495 1.495 0 0 0-.393.694l-.369 1.477l1.477-.37c.263-.065.503-.2.694-.392l5.949-5.95l-1.409-1.408zm1.41-1.41l-.705.705l1.408 1.409l.705-.704a.996.996 0 0 0-1.409-1.41z',\r\n            fill: 'currentColor',\r\n        },\r\n    ],// fluent:Edit16Regular\r\n\r\n}","<script>\r\nimport { h } from 'vue'\r\n\r\nexport default {\r\n  props: {\r\n    size: {\r\n      type: [Number, String],\r\n      default: 20,\r\n    },\r\n    color: {\r\n      type: String,\r\n      default: 'currentColor',\r\n    },\r\n    viewBox: {\r\n      type: String,\r\n      default: '0 0 16 16',\r\n    },\r\n    paths: {\r\n      type: Array,\r\n      required: true,\r\n      // каждый элемент — объект с атрибутами для <path>, например { d: '...', fill: 'currentColor' }\r\n    },\r\n  },\r\n  setup(props) {\r\n    return () =>\r\n      h(\r\n        'svg',\r\n        {\r\n          xmlns: 'http://www.w3.org/2000/svg',\r\n          viewBox: props.viewBox,\r\n          fill: props.color,\r\n          width: props.size,\r\n          height: props.size,\r\n          'aria-hidden': 'true',\r\n          focusable: 'false',\r\n        },\r\n        props.paths.map((pathAttrs) => h('path', pathAttrs))\r\n      )\r\n  },\r\n}\r\n</script>","import script from \"./CustomIcon.vue?vue&type=script&lang=js\"\nexport * from \"./CustomIcon.vue?vue&type=script&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"tool-panel\" }\n\nimport { ref, computed, h } from 'vue';\r\nimport {\r\n  NButton,\r\n  NIcon,\r\n  NInput,\r\n  NSpace,\r\n  NPopover,\r\n  NList,\r\n  NListItem,\r\n  NCard,\r\n  NForm,\r\n  NFormItem,\r\n  NCode,\r\n  NText,\r\n  // NUpload,\r\n  useMessage\r\n} from 'naive-ui';\r\nimport { useVueFlow, Edge } from '@vue-flow/core';\r\nimport YAML from 'yaml';\r\nimport CustomNode from '../types';\r\nimport config from '../types/nodesConfig';\r\nimport { pathsData } from './icons';\r\nimport CustomIcon from './icons/CustomIcon.vue';\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ToolPanel',\n  props: {\r\n  elements: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  isRunning: Boolean,\r\n  isStopped: Boolean,\r\n  selectedNode: Object,\r\n  selectedEdge: Object\r\n},\n  emits: [\r\n  'add-node', 'start-flow', 'stop-flow', 'continue-flow',\r\n  'reset-flow', 'update-node-label', 'update-node-command',\r\n  'delete-selected-edge', 'import-json'\r\n],\n  setup(__props, { emit: __emit }) {\n\r\nconst {\r\n  getEdges,\r\n  // addEdges,\r\n  // setNodes,\r\n  // setEdges\r\n} = useVueFlow();\r\n\r\nconst message = useMessage();\r\nconst fileInput = ref<HTMLInputElement | null>(null);\r\n\r\n// create icon\r\nconst createIcon = (iconName: string) => {\r\n  const iconPaths = pathsData?.[iconName];\r\n  return iconPaths ? h(CustomIcon, { paths: iconPaths }) : null;\r\n};\r\n\r\n// icons\r\nconst QuestionIcon = createIcon('question');\r\nconst PlusIcon = createIcon('plus');\r\nconst PlayIcon = createIcon('play');\r\nconst PauseIcon = createIcon('pause');\r\nconst DeleteIcon = createIcon('delete');\r\nconst RefreshIcon = createIcon('refresh');\r\nconst CodeIcon = createIcon('code');\r\nconst DownloadIcon = createIcon('download');\r\nconst UploadIcon = createIcon('upload');\r\nconst EditIcon = createIcon('edit');\r\n\r\nconst props = __props;\r\n\r\nconst emit = __emit;\r\n\r\nconst flowName = ref('my_flow');\r\nconst flowDescription = ref('My flow\\'s description');\r\nconst daguYaml = ref('');\r\nconst pipelineJson = ref('');\r\nconst showPipelineJson = ref(false);\r\nconst showDaguYaml = ref(false);\r\nconst showHints = ref(false);\r\n\r\nconst isGraphValid = computed(() => {\r\n  const visited = new Set<string>();\r\n  let currentNode: string | null = 'start';\r\n  \r\n  while (currentNode && currentNode !== 'end') {\r\n    if (visited.has(currentNode)) return false;\r\n    visited.add(currentNode);\r\n    \r\n    const edgesFromCurrent = getEdges.value.filter(e => e.source === currentNode);\r\n    if (edgesFromCurrent.length !== 1) return false;\r\n    \r\n    currentNode = edgesFromCurrent[0].target;\r\n  }\r\n  \r\n  return currentNode === 'end';\r\n});\r\n\r\nconst getNextNode = (nodeId: string): string | null => {\r\n  const edges = props.elements.filter((el: any) => el.source === nodeId && el.target) as Edge[];\r\n  return edges.length > 0 ? edges[0].target : null;\r\n};\r\n\r\nconst generateDAGUYaml = () => {\r\n  const steps = [];\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    \r\n    const node = props.elements.find(n => n.id === nextNode) as CustomNode;\r\n    if (node && !isProtectedNode(node.id)) {\r\n      steps.push({\r\n        name: node.data.label,\r\n        command: node.data.command\r\n      });\r\n    }\r\n    currentNode = nextNode;\r\n  }\r\n  \r\n  const daguConfig = {\r\n    name: flowName.value,\r\n    description: flowDescription.value,\r\n    steps: steps\r\n  };\r\n  \r\n  daguYaml.value = YAML.stringify(daguConfig);\r\n};\r\n\r\nconst generatePipelineJson = () => {\r\n  const steps = [];\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    \r\n    const node = props.elements.find(n => n.id === nextNode) as CustomNode;\r\n    if (node && !isProtectedNode(node.id)) {\r\n      const step: any = {\r\n        name: node.data.label,\r\n        command: node.data.command,\r\n        type: node.data.label.split('_')[0]\r\n      };\r\n\r\n      // add params from config\r\n      const nodeType = node.data.label.split('_')[0];\r\n      const operationName = node.data.label.split('_')[1];\r\n      const nodeConfig = config[nodeType]?.find(n => n.name === operationName);\r\n      \r\n      if (nodeConfig) {\r\n        step.params = {};\r\n        nodeConfig.params.forEach(param => {\r\n          if (node.data[param.name] !== undefined) {\r\n            step.params[param.name] = node.data[param.name];\r\n          }\r\n        });\r\n      }\r\n      \r\n      steps.push(step);\r\n    }\r\n    currentNode = nextNode;\r\n  }\r\n  \r\n  const pipelineConfig = {\r\n    name: flowName.value,\r\n    description: flowDescription.value,\r\n    steps: steps\r\n  };\r\n  \r\n  pipelineJson.value = JSON.stringify(pipelineConfig, null, 2);\r\n};\r\n\r\nconst downloadDAGUYaml = () => {\r\n  if (!daguYaml.value) return;\r\n  \r\n  const blob = new Blob([daguYaml.value], { type: 'application/yaml' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `${flowName.value}.yaml`.replace(/\\s+/g, '_');\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\nconst downloadPipelineJson = () => {\r\n  if (!pipelineJson.value) return;\r\n  \r\n  const blob = new Blob([pipelineJson.value], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `${flowName.value}.json`.replace(/\\s+/g, '_');\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\n\r\n// functions of import\r\nconst triggerFileInput = () => {\r\n  fileInput.value?.click();\r\n};\r\n\r\nconst handleFileSelect = async (event: Event) => {\r\n  const input = event.target as HTMLInputElement;\r\n  if (!input.files || input.files.length === 0) return;\r\n\r\n  const file = input.files[0];\r\n  if (!file) return;\r\n\r\n  try {\r\n    const content = await readFileAsText(file);\r\n    const jsonConfig = JSON.parse(content);\r\n    \r\n    if (!jsonConfig || typeof jsonConfig !== 'object') {\r\n      throw new Error('Invalid JSON format');\r\n    }\r\n    \r\n    flowName.value = jsonConfig.name || 'imported_flow';\r\n    flowDescription.value = jsonConfig.description || '';\r\n    \r\n    emit('import-json', jsonConfig);\r\n    message.success('Flow импортирован успешно');\r\n  } catch (error) {\r\n    message.error(`Import failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    console.error('Import error:', error);\r\n  } finally {\r\n    if (input) input.value = '';\r\n  }\r\n};\r\n\r\nconst readFileAsText = (file: File): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(reader.result as string);\r\n    reader.onerror = () => reject(new Error('File reading failed'));\r\n    reader.readAsText(file);\r\n  });\r\n};\r\n\r\n/*\r\nconst handleJsonImport = async (options: { file: File } | FileList | null) => {\r\n  try {\r\n    // Обрабатываем разные варианты входных данных\r\n    let file: File | null = null;\r\n    \r\n    if (options instanceof FileList) {\r\n      file = options[0];\r\n    } else if (options && 'file' in options) {\r\n      file = options.file;\r\n    }\r\n\r\n    if (!file) {\r\n      throw new Error('Файл не выбран');\r\n    }\r\n\r\n    // Читаем содержимое файла\r\n    const fileContent = await readFile(file);\r\n    const jsonConfig = JSON.parse(fileContent);\r\n    \r\n    // Валидация структуры\r\n    if (!jsonConfig?.steps || !Array.isArray(jsonConfig.steps)) {\r\n      throw new Error('Некорректная структура JSON');\r\n    }\r\n    \r\n    // Обновляем название и описание\r\n    flowName.value = jsonConfig.name || 'imported_flow';\r\n    flowDescription.value = jsonConfig.description || '';\r\n    \r\n    // Передаем конфиг в FlowBuilder\r\n    emit('import-json', jsonConfig);\r\n    \r\n    message.success('Граф успешно импортирован');\r\n  } catch (error) {\r\n    console.error('Ошибка импорта:', error);\r\n    message.error(`Ошибка импорта: ${error instanceof Error ? error.message : 'Неизвестная ошибка'}`);\r\n  }\r\n};\r\n\r\nconst readFile = (file: File): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => resolve(e.target?.result as string);\r\n    reader.onerror = (e) => reject(new Error('Ошибка чтения файла: ' + e));\r\n    reader.readAsText(file);\r\n  });\r\n};\r\n*/ \r\n\r\nconst isProtectedNode = (nodeId: string) => {\r\n  return nodeId === 'start' || nodeId === 'end';\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_unref(NSpace), {\n      justify: \"space-between\",\n      align: \"center\",\n      style: {\"padding\":\"7px 17px\"}\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_unref(NSpace), { style: {\"padding\":\"0 17px\"} }, {\n          default: _withCtx(() => [\n            _createVNode(_unref(NText), {\n              style: {\"color\":\"#f2f2f2\",\"font-size\":\"20px\"},\n              strong: \"\"\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(flowName.value), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_unref(NPopover), { trigger: \"click\" }, {\n              trigger: _withCtx(() => [\n                _createVNode(_unref(NButton), {\n                  text: \"\",\n                  style: {\"font-size\":\"18px\"},\n                  color: \"#c7c7c7\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(NIcon), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(EditIcon))\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_unref(NCard), {\n                  title: \"Настройки пайплайна\",\n                  size: \"small\",\n                  style: {\"width\":\"300px\"}\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(NForm), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NFormItem), {\n                          label: \"Название\",\n                          path: \"flowName\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_unref(NInput), {\n                              value: flowName.value,\n                              \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((flowName).value = $event)),\n                              placeholder: \"Введите название\"\n                            }, null, 8, [\"value\"])\n                          ]),\n                          _: 1\n                        }),\n                        _createVNode(_unref(NFormItem), {\n                          label: \"Описание\",\n                          path: \"flowDescription\"\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_unref(NInput), {\n                              value: flowDescription.value,\n                              \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((flowDescription).value = $event)),\n                              placeholder: \"Введите описание\",\n                              type: \"textarea\"\n                            }, null, 8, [\"value\"])\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }),\n        _createVNode(_unref(NSpace), null, {\n          default: _withCtx(() => [\n            _createVNode(_unref(NButton), {\n              onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.$emit('add-node'))),\n              type: \"primary\",\n              circle: \"\"\n            }, {\n              icon: _withCtx(() => [\n                _createVNode(_unref(NIcon), null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(PlusIcon))\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_unref(NButton), {\n              onClick: _cache[3] || (_cache[3] = ($event: any) => (_ctx.$emit('start-flow'))),\n              disabled: !isGraphValid.value || props.isRunning,\n              type: \"success\",\n              circle: \"\"\n            }, {\n              icon: _withCtx(() => [\n                _createVNode(_unref(NIcon), null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(PlayIcon))\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"disabled\"]),\n            _createVNode(_unref(NButton), {\n              onClick: _cache[4] || (_cache[4] = ($event: any) => (_ctx.$emit('stop-flow'))),\n              disabled: !props.isRunning || props.isStopped,\n              type: \"warning\",\n              circle: \"\"\n            }, {\n              icon: _withCtx(() => [\n                _createVNode(_unref(NIcon), null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(PauseIcon))\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"disabled\"]),\n            (props.isStopped)\n              ? (_openBlock(), _createBlock(_unref(NButton), {\n                  key: 0,\n                  onClick: _cache[5] || (_cache[5] = ($event: any) => (_ctx.$emit('reset-flow'))),\n                  type: \"error\",\n                  circle: \"\"\n                }, {\n                  icon: _withCtx(() => [\n                    _createVNode(_unref(NIcon), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(RefreshIcon))\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }),\n        (props.selectedEdge)\n          ? (_openBlock(), _createBlock(_unref(NSpace), { key: 0 }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(NButton), {\n                  onClick: _cache[6] || (_cache[6] = ($event: any) => (_ctx.$emit('delete-selected-edge'))),\n                  type: \"error\",\n                  circle: \"\"\n                }, {\n                  icon: _withCtx(() => [\n                    _createVNode(_unref(NIcon), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(DeleteIcon))\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true),\n        _createVNode(_unref(NSpace), null, {\n          default: _withCtx(() => [\n            (isGraphValid.value)\n              ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                  _createVNode(_unref(NPopover), {\n                    trigger: \"click\",\n                    show: showDaguYaml.value\n                  }, {\n                    trigger: _withCtx(() => [\n                      _createVNode(_unref(NButton), {\n                        onClick: _cache[7] || (_cache[7] = ($event: any) => {generateDAGUYaml(); showDaguYaml.value = !showDaguYaml.value}),\n                        ghost: \"\",\n                        color: \"#c7c7c7\",\n                        size: \"small\"\n                      }, {\n                        icon: _withCtx(() => [\n                          _createVNode(_unref(NIcon), null, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(CodeIcon))\n                            ]),\n                            _: 1\n                          })\n                        ]),\n                        default: _withCtx(() => [\n                          _cache[13] || (_cache[13] = _createTextVNode(\" YAML \"))\n                        ]),\n                        _: 1,\n                        __: [13]\n                      })\n                    ]),\n                    default: _withCtx(() => [\n                      (daguYaml.value)\n                        ? (_openBlock(), _createBlock(_unref(NCard), {\n                            key: 0,\n                            title: \"DAGU Config\",\n                            size: \"small\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(NCode), {\n                                language: \"yaml\",\n                                code: daguYaml.value,\n                                \"word-wrap\": \"\"\n                              }, null, 8, [\"code\"])\n                            ]),\n                            _: 1\n                          }))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _: 1\n                  }, 8, [\"show\"]),\n                  _createVNode(_unref(NButton), {\n                    onClick: _cache[8] || (_cache[8] = ($event: any) => (downloadDAGUYaml())),\n                    size: \"small\",\n                    ghost: \"\",\n                    color: \"#c7c7c7\"\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(_unref(NIcon), null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(DownloadIcon))\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    default: _withCtx(() => [\n                      _cache[14] || (_cache[14] = _createTextVNode(\" Export YAML \"))\n                    ]),\n                    _: 1,\n                    __: [14]\n                  }),\n                  _createVNode(_unref(NPopover), {\n                    trigger: \"click\",\n                    show: showPipelineJson.value\n                  }, {\n                    trigger: _withCtx(() => [\n                      _createVNode(_unref(NButton), {\n                        onClick: _cache[9] || (_cache[9] = ($event: any) => {generatePipelineJson(); showPipelineJson.value = !showPipelineJson.value}),\n                        ghost: \"\",\n                        color: \"#c7c7c7\",\n                        size: \"small\"\n                      }, {\n                        icon: _withCtx(() => [\n                          _createVNode(_unref(NIcon), null, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(CodeIcon))\n                            ]),\n                            _: 1\n                          })\n                        ]),\n                        default: _withCtx(() => [\n                          _cache[15] || (_cache[15] = _createTextVNode(\" JSON \"))\n                        ]),\n                        _: 1,\n                        __: [15]\n                      })\n                    ]),\n                    default: _withCtx(() => [\n                      (pipelineJson.value)\n                        ? (_openBlock(), _createBlock(_unref(NCard), {\n                            key: 0,\n                            title: \"Конфигурация JSON\",\n                            size: \"small\"\n                          }, {\n                            default: _withCtx(() => [\n                              _createVNode(_unref(NCode), {\n                                language: \"json\",\n                                code: pipelineJson.value,\n                                \"word-wrap\": \"\"\n                              }, null, 8, [\"code\"])\n                            ]),\n                            _: 1\n                          }))\n                        : _createCommentVNode(\"\", true)\n                    ]),\n                    _: 1\n                  }, 8, [\"show\"]),\n                  _createVNode(_unref(NButton), {\n                    onClick: _cache[10] || (_cache[10] = ($event: any) => (downloadPipelineJson())),\n                    size: \"small\",\n                    ghost: \"\",\n                    color: \"#c7c7c7\"\n                  }, {\n                    icon: _withCtx(() => [\n                      _createVNode(_unref(NIcon), null, {\n                        default: _withCtx(() => [\n                          _createVNode(_unref(DownloadIcon))\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    default: _withCtx(() => [\n                      _cache[16] || (_cache[16] = _createTextVNode(\" Export JSON \"))\n                    ]),\n                    _: 1,\n                    __: [16]\n                  })\n                ], 64))\n              : _createCommentVNode(\"\", true),\n            _createElementVNode(\"input\", {\n              type: \"file\",\n              ref_key: \"fileInput\",\n              ref: fileInput,\n              accept: \".json\",\n              style: {\"display\":\"none\"},\n              onChange: handleFileSelect\n            }, null, 544),\n            _createVNode(_unref(NButton), {\n              onClick: _cache[11] || (_cache[11] = ($event: any) => (triggerFileInput())),\n              ghost: \"\",\n              color: \"#c7c7c7\",\n              size: \"small\"\n            }, {\n              icon: _withCtx(() => [\n                _createVNode(_unref(NIcon), null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(UploadIcon))\n                  ]),\n                  _: 1\n                })\n              ]),\n              default: _withCtx(() => [\n                _cache[17] || (_cache[17] = _createTextVNode(\" Import JSON \"))\n              ]),\n              _: 1,\n              __: [17]\n            })\n          ]),\n          _: 1\n        }),\n        _createVNode(_unref(NSpace), null, {\n          default: _withCtx(() => [\n            _createVNode(_unref(NPopover), {\n              trigger: \"click\",\n              show: showHints.value\n            }, {\n              trigger: _withCtx(() => [\n                _createVNode(_unref(NButton), {\n                  onClick: _cache[12] || (_cache[12] = ($event: any) => (showHints.value = !showHints.value)),\n                  ghost: \"\",\n                  color: \"#c7c7c7\",\n                  circle: \"\"\n                }, {\n                  icon: _withCtx(() => [\n                    _createVNode(_unref(NIcon), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(QuestionIcon))\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_unref(NList), null, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(NListItem), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NText), null, {\n                          default: _withCtx(() => _cache[18] || (_cache[18] = [\n                            _createElementVNode(\"strong\", null, \"ЛКМ\", -1),\n                            _createTextVNode(\" - Выбрать шаг\")\n                          ])),\n                          _: 1,\n                          __: [18]\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_unref(NListItem), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NText), null, {\n                          default: _withCtx(() => _cache[19] || (_cache[19] = [\n                            _createElementVNode(\"strong\", null, \"ПКМ\", -1),\n                            _createTextVNode(\" - Редактировать параметры шага\")\n                          ])),\n                          _: 1,\n                          __: [19]\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_unref(NListItem), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NText), null, {\n                          default: _withCtx(() => _cache[20] || (_cache[20] = [\n                            _createElementVNode(\"strong\", null, \"Ctrl+A\", -1),\n                            _createTextVNode(\" - Добавить новый шаг\")\n                          ])),\n                          _: 1,\n                          __: [20]\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_unref(NListItem), null, {\n                      default: _withCtx(() => [\n                        _createVNode(_unref(NText), null, {\n                          default: _withCtx(() => _cache[21] || (_cache[21] = [\n                            _createElementVNode(\"strong\", null, \"Ctrl+X\", -1),\n                            _createTextVNode(\" - Удалить выбранный шаг или связь\")\n                          ])),\n                          _: 1,\n                          __: [21]\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"show\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"tool-panel\">\r\n    <n-space justify=\"space-between\" align=\"center\" style=\"padding: 7px 17px\">\r\n      <!-- Flow Settings -->\r\n      <n-space style=\"padding: 0 17px\">\r\n        <n-text style=\"color: #f2f2f2; font-size: 20px\" strong>{{ flowName }}</n-text>\r\n        <n-popover trigger=\"click\">\r\n          <template #trigger>\r\n            <n-button text style=\"font-size: 18px\" color=\"#c7c7c7\">\r\n              <n-icon><edit-icon /></n-icon>\r\n            </n-button>\r\n          </template>\r\n          <n-card title=\"Настройки пайплайна\" size=\"small\" style=\"width: 300px\">\r\n            <n-form>\r\n              <n-form-item label=\"Название\" path=\"flowName\">\r\n                <n-input \r\n                  v-model:value=\"flowName\" \r\n                  placeholder=\"Введите название\"\r\n                />\r\n              </n-form-item>\r\n              <n-form-item label=\"Описание\" path=\"flowDescription\">\r\n                <n-input \r\n                  v-model:value=\"flowDescription\" \r\n                  placeholder=\"Введите описание\"\r\n                  type=\"textarea\"\r\n                />\r\n              </n-form-item>\r\n            </n-form>\r\n          </n-card>\r\n        </n-popover>\r\n      </n-space>\r\n\r\n      <!-- Flow Management -->\r\n      <n-space>\r\n        <n-button @click=\"$emit('add-node')\" type=\"primary\" circle>\r\n          <template #icon>\r\n            <n-icon><plus-icon /></n-icon>\r\n          </template>\r\n        </n-button>\r\n        <n-button \r\n          @click=\"$emit('start-flow')\" \r\n          :disabled=\"!isGraphValid || props.isRunning\"\r\n          type=\"success\"\r\n          circle\r\n        >\r\n          <template #icon>\r\n            <n-icon><play-icon /></n-icon>\r\n          </template>\r\n        </n-button>\r\n        <n-button \r\n          @click=\"$emit('stop-flow')\" \r\n          :disabled=\"!props.isRunning || props.isStopped\"\r\n          type=\"warning\"\r\n          circle\r\n        >\r\n          <template #icon>\r\n            <n-icon><pause-icon /></n-icon>\r\n          </template>\r\n        </n-button>\r\n        <n-button \r\n          v-if=\"props.isStopped\" \r\n          @click=\"$emit('reset-flow')\"\r\n          type=\"error\"\r\n          circle\r\n        >\r\n          <template #icon>\r\n            <n-icon><refresh-icon /></n-icon>\r\n          </template>\r\n        </n-button>\r\n      </n-space>\r\n\r\n      <!-- Edge Settings -->\r\n      <n-space v-if=\"props.selectedEdge\">\r\n        <n-button @click=\"$emit('delete-selected-edge')\" type=\"error\" circle>\r\n          <template #icon>\r\n            <n-icon><delete-icon /></n-icon>\r\n          </template>\r\n        </n-button>\r\n      </n-space>\r\n\r\n      <!-- Export/Import -->\r\n      <n-space>\r\n        <!-- Export Buttons -->\r\n        <template v-if=\"isGraphValid\">\r\n          <n-popover trigger=\"click\" :show=\"showDaguYaml\">\r\n            <template #trigger>\r\n              <n-button @click=\"generateDAGUYaml(); showDaguYaml = !showDaguYaml\" ghost color=\"#c7c7c7\" size=\"small\">\r\n                <template #icon>\r\n                  <n-icon><code-icon /></n-icon>\r\n                </template>\r\n                YAML\r\n              </n-button>\r\n            </template>\r\n            <n-card v-if=\"daguYaml\" title=\"DAGU Config\" size=\"small\">\r\n              <n-code language=\"yaml\" :code=\"daguYaml\" word-wrap/>\r\n            </n-card>\r\n          </n-popover>\r\n\r\n          <n-button @click=\"downloadDAGUYaml()\" size=\"small\" ghost color=\"#c7c7c7\">\r\n            <template #icon>\r\n              <n-icon><download-icon /></n-icon>\r\n            </template>\r\n            Export YAML\r\n          </n-button>\r\n\r\n          <n-popover trigger=\"click\" :show=\"showPipelineJson\">\r\n            <template #trigger>\r\n              <n-button @click=\"generatePipelineJson(); showPipelineJson = !showPipelineJson\" ghost color=\"#c7c7c7\" size=\"small\">\r\n                <template #icon>\r\n                  <n-icon><code-icon /></n-icon>\r\n                </template>\r\n                JSON\r\n              </n-button>\r\n            </template>\r\n            <n-card v-if=\"pipelineJson\" title=\"Конфигурация JSON\" size=\"small\">\r\n              <n-code language=\"json\" :code=\"pipelineJson\" word-wrap/>\r\n            </n-card>\r\n          </n-popover>\r\n\r\n          <n-button @click=\"downloadPipelineJson()\" size=\"small\" ghost color=\"#c7c7c7\">\r\n            <template #icon>\r\n              <n-icon><download-icon /></n-icon>\r\n            </template>\r\n            Export JSON\r\n          </n-button>\r\n        </template>\r\n\r\n        <!-- Import Button -->\r\n        <input \r\n          type=\"file\" \r\n          ref=\"fileInput\"\r\n          accept=\".json\"\r\n          style=\"display: none\"\r\n          @change=\"handleFileSelect\"\r\n        >\r\n        <n-button \r\n          @click=\"triggerFileInput()\" \r\n          ghost \r\n          color=\"#c7c7c7\" \r\n          size=\"small\"\r\n        >\r\n          <template #icon>\r\n            <n-icon><upload-icon /></n-icon>\r\n          </template>\r\n          Import JSON\r\n        </n-button>\r\n      </n-space>\r\n\r\n      <!-- Tips -->\r\n      <n-space>\r\n        <n-popover trigger=\"click\" :show=\"showHints\">\r\n          <template #trigger>\r\n            <n-button @click=\"showHints = !showHints\" ghost color=\"#c7c7c7\" circle>\r\n              <template #icon>\r\n                <n-icon><question-icon /></n-icon>\r\n              </template>\r\n            </n-button>\r\n          </template>\r\n          <n-list>\r\n            <n-list-item>\r\n              <n-text><strong>ЛКМ</strong> - Выбрать шаг</n-text>\r\n            </n-list-item>\r\n            <n-list-item>\r\n              <n-text><strong>ПКМ</strong> - Редактировать параметры шага</n-text>\r\n            </n-list-item>\r\n            <n-list-item>\r\n              <n-text><strong>Ctrl+A</strong> - Добавить новый шаг</n-text>\r\n            </n-list-item>\r\n            <n-list-item>\r\n              <n-text><strong>Ctrl+X</strong> - Удалить выбранный шаг или связь</n-text>\r\n            </n-list-item>\r\n          </n-list>\r\n        </n-popover>\r\n      </n-space>\r\n    </n-space>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, defineProps, defineEmits, computed, h } from 'vue';\r\nimport {\r\n  NButton,\r\n  NIcon,\r\n  NInput,\r\n  NSpace,\r\n  NPopover,\r\n  NList,\r\n  NListItem,\r\n  NCard,\r\n  NForm,\r\n  NFormItem,\r\n  NCode,\r\n  NText,\r\n  // NUpload,\r\n  useMessage\r\n} from 'naive-ui';\r\nimport { useVueFlow, Edge } from '@vue-flow/core';\r\nimport YAML from 'yaml';\r\nimport CustomNode from '../types';\r\nimport config from '../types/nodesConfig';\r\nimport { pathsData } from './icons';\r\nimport CustomIcon from './icons/CustomIcon.vue';\r\n\r\nconst {\r\n  getEdges,\r\n  // addEdges,\r\n  // setNodes,\r\n  // setEdges\r\n} = useVueFlow();\r\n\r\nconst message = useMessage();\r\nconst fileInput = ref<HTMLInputElement | null>(null);\r\n\r\n// create icon\r\nconst createIcon = (iconName: string) => {\r\n  const iconPaths = pathsData?.[iconName];\r\n  return iconPaths ? h(CustomIcon, { paths: iconPaths }) : null;\r\n};\r\n\r\n// icons\r\nconst QuestionIcon = createIcon('question');\r\nconst PlusIcon = createIcon('plus');\r\nconst PlayIcon = createIcon('play');\r\nconst PauseIcon = createIcon('pause');\r\nconst DeleteIcon = createIcon('delete');\r\nconst RefreshIcon = createIcon('refresh');\r\nconst CodeIcon = createIcon('code');\r\nconst DownloadIcon = createIcon('download');\r\nconst UploadIcon = createIcon('upload');\r\nconst EditIcon = createIcon('edit');\r\n\r\nconst props = defineProps({\r\n  elements: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  isRunning: Boolean,\r\n  isStopped: Boolean,\r\n  selectedNode: Object,\r\n  selectedEdge: Object\r\n});\r\n\r\nconst emit = defineEmits([\r\n  'add-node', 'start-flow', 'stop-flow', 'continue-flow',\r\n  'reset-flow', 'update-node-label', 'update-node-command',\r\n  'delete-selected-edge', 'import-json'\r\n]);\r\n\r\nconst flowName = ref('my_flow');\r\nconst flowDescription = ref('My flow\\'s description');\r\nconst daguYaml = ref('');\r\nconst pipelineJson = ref('');\r\nconst showPipelineJson = ref(false);\r\nconst showDaguYaml = ref(false);\r\nconst showHints = ref(false);\r\n\r\nconst isGraphValid = computed(() => {\r\n  const visited = new Set<string>();\r\n  let currentNode: string | null = 'start';\r\n  \r\n  while (currentNode && currentNode !== 'end') {\r\n    if (visited.has(currentNode)) return false;\r\n    visited.add(currentNode);\r\n    \r\n    const edgesFromCurrent = getEdges.value.filter(e => e.source === currentNode);\r\n    if (edgesFromCurrent.length !== 1) return false;\r\n    \r\n    currentNode = edgesFromCurrent[0].target;\r\n  }\r\n  \r\n  return currentNode === 'end';\r\n});\r\n\r\nconst getNextNode = (nodeId: string): string | null => {\r\n  const edges = props.elements.filter((el: any) => el.source === nodeId && el.target) as Edge[];\r\n  return edges.length > 0 ? edges[0].target : null;\r\n};\r\n\r\nconst generateDAGUYaml = () => {\r\n  const steps = [];\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    \r\n    const node = props.elements.find(n => n.id === nextNode) as CustomNode;\r\n    if (node && !isProtectedNode(node.id)) {\r\n      steps.push({\r\n        name: node.data.label,\r\n        command: node.data.command\r\n      });\r\n    }\r\n    currentNode = nextNode;\r\n  }\r\n  \r\n  const daguConfig = {\r\n    name: flowName.value,\r\n    description: flowDescription.value,\r\n    steps: steps\r\n  };\r\n  \r\n  daguYaml.value = YAML.stringify(daguConfig);\r\n};\r\n\r\nconst generatePipelineJson = () => {\r\n  const steps = [];\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    \r\n    const node = props.elements.find(n => n.id === nextNode) as CustomNode;\r\n    if (node && !isProtectedNode(node.id)) {\r\n      const step: any = {\r\n        name: node.data.label,\r\n        command: node.data.command,\r\n        type: node.data.label.split('_')[0]\r\n      };\r\n\r\n      // add params from config\r\n      const nodeType = node.data.label.split('_')[0];\r\n      const operationName = node.data.label.split('_')[1];\r\n      const nodeConfig = config[nodeType]?.find(n => n.name === operationName);\r\n      \r\n      if (nodeConfig) {\r\n        step.params = {};\r\n        nodeConfig.params.forEach(param => {\r\n          if (node.data[param.name] !== undefined) {\r\n            step.params[param.name] = node.data[param.name];\r\n          }\r\n        });\r\n      }\r\n      \r\n      steps.push(step);\r\n    }\r\n    currentNode = nextNode;\r\n  }\r\n  \r\n  const pipelineConfig = {\r\n    name: flowName.value,\r\n    description: flowDescription.value,\r\n    steps: steps\r\n  };\r\n  \r\n  pipelineJson.value = JSON.stringify(pipelineConfig, null, 2);\r\n};\r\n\r\nconst downloadDAGUYaml = () => {\r\n  if (!daguYaml.value) return;\r\n  \r\n  const blob = new Blob([daguYaml.value], { type: 'application/yaml' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `${flowName.value}.yaml`.replace(/\\s+/g, '_');\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\nconst downloadPipelineJson = () => {\r\n  if (!pipelineJson.value) return;\r\n  \r\n  const blob = new Blob([pipelineJson.value], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = `${flowName.value}.json`.replace(/\\s+/g, '_');\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  URL.revokeObjectURL(url);\r\n};\r\n\r\n\r\n// functions of import\r\nconst triggerFileInput = () => {\r\n  fileInput.value?.click();\r\n};\r\n\r\nconst handleFileSelect = async (event: Event) => {\r\n  const input = event.target as HTMLInputElement;\r\n  if (!input.files || input.files.length === 0) return;\r\n\r\n  const file = input.files[0];\r\n  if (!file) return;\r\n\r\n  try {\r\n    const content = await readFileAsText(file);\r\n    const jsonConfig = JSON.parse(content);\r\n    \r\n    if (!jsonConfig || typeof jsonConfig !== 'object') {\r\n      throw new Error('Invalid JSON format');\r\n    }\r\n    \r\n    flowName.value = jsonConfig.name || 'imported_flow';\r\n    flowDescription.value = jsonConfig.description || '';\r\n    \r\n    emit('import-json', jsonConfig);\r\n    message.success('Flow импортирован успешно');\r\n  } catch (error) {\r\n    message.error(`Import failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    console.error('Import error:', error);\r\n  } finally {\r\n    if (input) input.value = '';\r\n  }\r\n};\r\n\r\nconst readFileAsText = (file: File): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => resolve(reader.result as string);\r\n    reader.onerror = () => reject(new Error('File reading failed'));\r\n    reader.readAsText(file);\r\n  });\r\n};\r\n\r\n/*\r\nconst handleJsonImport = async (options: { file: File } | FileList | null) => {\r\n  try {\r\n    // Обрабатываем разные варианты входных данных\r\n    let file: File | null = null;\r\n    \r\n    if (options instanceof FileList) {\r\n      file = options[0];\r\n    } else if (options && 'file' in options) {\r\n      file = options.file;\r\n    }\r\n\r\n    if (!file) {\r\n      throw new Error('Файл не выбран');\r\n    }\r\n\r\n    // Читаем содержимое файла\r\n    const fileContent = await readFile(file);\r\n    const jsonConfig = JSON.parse(fileContent);\r\n    \r\n    // Валидация структуры\r\n    if (!jsonConfig?.steps || !Array.isArray(jsonConfig.steps)) {\r\n      throw new Error('Некорректная структура JSON');\r\n    }\r\n    \r\n    // Обновляем название и описание\r\n    flowName.value = jsonConfig.name || 'imported_flow';\r\n    flowDescription.value = jsonConfig.description || '';\r\n    \r\n    // Передаем конфиг в FlowBuilder\r\n    emit('import-json', jsonConfig);\r\n    \r\n    message.success('Граф успешно импортирован');\r\n  } catch (error) {\r\n    console.error('Ошибка импорта:', error);\r\n    message.error(`Ошибка импорта: ${error instanceof Error ? error.message : 'Неизвестная ошибка'}`);\r\n  }\r\n};\r\n\r\nconst readFile = (file: File): Promise<string> => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => resolve(e.target?.result as string);\r\n    reader.onerror = (e) => reject(new Error('Ошибка чтения файла: ' + e));\r\n    reader.readAsText(file);\r\n  });\r\n};\r\n*/ \r\n\r\nconst isProtectedNode = (nodeId: string) => {\r\n  return nodeId === 'start' || nodeId === 'end';\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tool-panel {\r\n  background-color: #0f0101;\r\n  color: white;\r\n  padding: 5px 0;\r\n  border-radius: 8px;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.settings-cards {\r\n  display: flex;\r\n  gap: 15px;\r\n  margin-top: 10px;\r\n  padding: 0 10px;\r\n}\r\n\r\n.settings-cards > * {\r\n  flex: 1;\r\n}\r\n</style>","import script from \"./ToolPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ToolPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ToolPanel.vue?vue&type=style&index=0&id=2cef7888&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2cef7888\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = { style: {\"display\":\"flex\",\"justify-content\":\"flex-end\",\"margin-top\":\"20px\"} }\n\nimport { ref, watch, computed } from 'vue';\r\nimport { \r\n  NInput, NButton, NCard, NForm, NFormItem,\r\n  NSelect, NSwitch, NInputNumber \r\n} from 'naive-ui';\r\nimport nodesConfig from '@/types/nodesConfig';\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'NodeContextMenu',\n  props: {\r\n  node: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  visible: Boolean,\r\n  x: Number,\r\n  y: Number\r\n},\n  emits: [\r\n  'update:visible', \r\n  'update-label', \r\n  'update-command',\r\n  'update-params'\r\n],\n  setup(__props, { emit: __emit }) {\n\r\nconst props = __props;\r\n\r\nconst emit = __emit;\r\n\r\nconst localLabel = ref('');\r\nconst localCommand = ref('');\r\nconst localParams = ref<Record<string, any>>({});\r\n\r\n// get parameters for the current node\r\nconst nodeParams = computed(() => {\r\n  if (!props.node?.data?.label) return [];\r\n  \r\n  // search in the config\r\n  const [nodeType, operationName] = props.node.data.label.split('_');\r\n  const operations = nodesConfig[nodeType];\r\n  const operation =  operations?.find(op => op.name === operationName);\r\n  if (operation) {\r\n      return operation.params;\r\n    }\r\n  return [];\r\n});\r\n\r\nwatch(() => props.node, (newNode) => {\r\n  if (newNode) {\r\n    localLabel.value = newNode.data.label;\r\n    localCommand.value = newNode.data.command || '';\r\n\r\n    nodeParams.value.forEach(param => {\r\n      localParams.value[param.name] = newNode.data[param.name] !== undefined \r\n        ? newNode.data[param.name] \r\n        : param.default;\r\n    });\r\n  }\r\n}, { immediate: true });\r\n\r\nconst positionStyle = computed(() => ({\r\n  left: `${props.x}px`,\r\n  top: `${props.y}px`,\r\n  position: 'absolute',\r\n  zIndex: 1000\r\n}));\r\n\r\nconst saveAndClose = () => {\r\n  emit('update-label', localLabel.value);\r\n  emit('update-command', localCommand.value);\r\n  \r\n  const paramsToUpdate: Record<string, any> = {};\r\n  nodeParams.value.forEach(param => {\r\n    if (localParams.value[param.name] !== undefined) {\r\n      paramsToUpdate[param.name] = localParams.value[param.name];\r\n    }\r\n  });\r\n  \r\n  emit('update-params', paramsToUpdate);\r\n  emit('update:visible', false);\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (__props.visible)\n    ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: \"node-context-menu\",\n        style: _normalizeStyle(positionStyle.value)\n      }, [\n        _createVNode(_unref(NCard), {\n          title: \"Редактирование шага\",\n          size: \"small\",\n          style: {\"width\":\"350px\"}\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_unref(NForm), null, {\n              default: _withCtx(() => [\n                _createVNode(_unref(NFormItem), { label: \"Название шага\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(NInput), {\n                      value: localLabel.value,\n                      \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((localLabel).value = $event)),\n                      onBlur: _ctx.updateLabel\n                    }, null, 8, [\"value\", \"onBlur\"])\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_unref(NFormItem), { label: \"Команда\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_unref(NInput), {\n                      value: localCommand.value,\n                      \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((localCommand).value = $event)),\n                      onBlur: _ctx.updateCommand\n                    }, null, 8, [\"value\", \"onBlur\"])\n                  ]),\n                  _: 1\n                }),\n                (nodeParams.value.length > 0)\n                  ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(nodeParams.value, (param) => {\n                      return (_openBlock(), _createBlock(_unref(NFormItem), {\n                        key: param.name,\n                        label: param.name\n                      }, {\n                        default: _withCtx(() => [\n                          (param.type === 'string' && param.enum)\n                            ? (_openBlock(), _createBlock(_unref(NSelect), {\n                                key: 0,\n                                value: localParams.value[param.name],\n                                \"onUpdate:value\": ($event: any) => ((localParams.value[param.name]) = $event),\n                                options: param.enum.map(e => ({ label: e, value: e }))\n                              }, null, 8, [\"value\", \"onUpdate:value\", \"options\"]))\n                            : (param.type === 'string')\n                              ? (_openBlock(), _createBlock(_unref(NInput), {\n                                  key: 1,\n                                  value: localParams.value[param.name],\n                                  \"onUpdate:value\": ($event: any) => ((localParams.value[param.name]) = $event)\n                                }, null, 8, [\"value\", \"onUpdate:value\"]))\n                              : (param.type === 'boolean')\n                                ? (_openBlock(), _createBlock(_unref(NSwitch), {\n                                    key: 2,\n                                    value: localParams.value[param.name],\n                                    \"onUpdate:value\": ($event: any) => ((localParams.value[param.name]) = $event)\n                                  }, null, 8, [\"value\", \"onUpdate:value\"]))\n                                : (param.type === 'number')\n                                  ? (_openBlock(), _createBlock(_unref(NInputNumber), {\n                                      key: 3,\n                                      value: localParams.value[param.name],\n                                      \"onUpdate:value\": ($event: any) => ((localParams.value[param.name]) = $event)\n                                    }, null, 8, [\"value\", \"onUpdate:value\"]))\n                                  : _createCommentVNode(\"\", true)\n                        ]),\n                        _: 2\n                      }, 1032, [\"label\"]))\n                    }), 128))\n                  : _createCommentVNode(\"\", true),\n                _createElementVNode(\"div\", _hoisted_1, [\n                  _createVNode(_unref(NButton), {\n                    onClick: saveAndClose,\n                    type: \"primary\"\n                  }, {\n                    default: _withCtx(() => _cache[2] || (_cache[2] = [\n                      _createTextVNode(\" Сохранить \")\n                    ])),\n                    _: 1,\n                    __: [2]\n                  })\n                ])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ], 4))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","<template>\r\n  <div \r\n    v-if=\"visible\"\r\n    class=\"node-context-menu\"\r\n    :style=\"positionStyle\"\r\n  >\r\n    <n-card title=\"Редактирование шага\" size=\"small\" style=\"width: 350px\">\r\n      <n-form>\r\n        <n-form-item label=\"Название шага\">\r\n          <n-input \r\n            v-model:value=\"localLabel\" \r\n            @blur=\"updateLabel\"\r\n          />\r\n        </n-form-item>\r\n        \r\n        <n-form-item label=\"Команда\">\r\n          <n-input \r\n            v-model:value=\"localCommand\" \r\n            @blur=\"updateCommand\"\r\n          />\r\n        </n-form-item>\r\n\r\n        <template v-if=\"nodeParams.length > 0\">\r\n          <n-form-item \r\n            v-for=\"param in nodeParams\" \r\n            :key=\"param.name\"\r\n            :label=\"param.name\"\r\n          >\r\n            <!-- Enum Params -->\r\n            <n-select\r\n              v-if=\"param.type === 'string' && param.enum\"\r\n              v-model:value=\"localParams[param.name]\"\r\n              :options=\"param.enum.map(e => ({ label: e, value: e }))\"\r\n            />\r\n            \r\n            <!-- String Params -->\r\n            <n-input\r\n              v-else-if=\"param.type === 'string'\"\r\n              v-model:value=\"localParams[param.name]\"\r\n            />\r\n            \r\n            <!-- Boolean Params -->\r\n            <n-switch\r\n              v-else-if=\"param.type === 'boolean'\"\r\n              v-model:value=\"localParams[param.name]\"\r\n            />\r\n            \r\n            <!-- Number Params -->\r\n            <n-input-number\r\n              v-else-if=\"param.type === 'number'\"\r\n              v-model:value=\"localParams[param.name]\"\r\n            />\r\n          </n-form-item>\r\n        </template>\r\n\r\n        <div style=\"display: flex; justify-content: flex-end; margin-top: 20px\">\r\n          <n-button @click=\"saveAndClose\" type=\"primary\">\r\n            Сохранить\r\n          </n-button>\r\n        </div>\r\n      </n-form>\r\n    </n-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, watch, computed, defineProps, defineEmits } from 'vue';\r\nimport { \r\n  NInput, NButton, NCard, NForm, NFormItem,\r\n  NSelect, NSwitch, NInputNumber \r\n} from 'naive-ui';\r\nimport nodesConfig from '@/types/nodesConfig';\r\n\r\nconst props = defineProps({\r\n  node: {\r\n    type: Object,\r\n    required: true\r\n  },\r\n  visible: Boolean,\r\n  x: Number,\r\n  y: Number\r\n});\r\n\r\nconst emit = defineEmits([\r\n  'update:visible', \r\n  'update-label', \r\n  'update-command',\r\n  'update-params'\r\n]);\r\n\r\nconst localLabel = ref('');\r\nconst localCommand = ref('');\r\nconst localParams = ref<Record<string, any>>({});\r\n\r\n// get parameters for the current node\r\nconst nodeParams = computed(() => {\r\n  if (!props.node?.data?.label) return [];\r\n  \r\n  // search in the config\r\n  const [nodeType, operationName] = props.node.data.label.split('_');\r\n  const operations = nodesConfig[nodeType];\r\n  const operation =  operations?.find(op => op.name === operationName);\r\n  if (operation) {\r\n      return operation.params;\r\n    }\r\n  return [];\r\n});\r\n\r\nwatch(() => props.node, (newNode) => {\r\n  if (newNode) {\r\n    localLabel.value = newNode.data.label;\r\n    localCommand.value = newNode.data.command || '';\r\n\r\n    nodeParams.value.forEach(param => {\r\n      localParams.value[param.name] = newNode.data[param.name] !== undefined \r\n        ? newNode.data[param.name] \r\n        : param.default;\r\n    });\r\n  }\r\n}, { immediate: true });\r\n\r\nconst positionStyle = computed(() => ({\r\n  left: `${props.x}px`,\r\n  top: `${props.y}px`,\r\n  position: 'absolute',\r\n  zIndex: 1000\r\n}));\r\n\r\nconst saveAndClose = () => {\r\n  emit('update-label', localLabel.value);\r\n  emit('update-command', localCommand.value);\r\n  \r\n  const paramsToUpdate: Record<string, any> = {};\r\n  nodeParams.value.forEach(param => {\r\n    if (localParams.value[param.name] !== undefined) {\r\n      paramsToUpdate[param.name] = localParams.value[param.name];\r\n    }\r\n  });\r\n  \r\n  emit('update-params', paramsToUpdate);\r\n  emit('update:visible', false);\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.node-context-menu {\r\n  background: white;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.n-form-item {\r\n  margin-bottom: 16px;\r\n}\r\n</style>","import script from \"./NodeContextMenu.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NodeContextMenu.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NodeContextMenu.vue?vue&type=style&index=0&id=28e50b78&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-28e50b78\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { computed } from 'vue';\r\nimport { NDropdown } from 'naive-ui';\r\nimport nodesConfig from '../types/nodesConfig'\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'NodeSelectionMenu',\n  props: {\r\n  show: Boolean,\r\n  position: {\r\n    type: Object,\r\n    default: () => ({ x: 0, y: 0 })\r\n  }\r\n},\n  emits: ['select', 'update:show'],\n  setup(__props, { emit: __emit }) {\n\r\nconst props = __props;\r\n\r\nconst emit = __emit;\r\n\r\nconst showMenu = computed({\r\n  get: () => props.show,\r\n  set: (value) => emit('update:show', value)\r\n});\r\n\r\nconst nodeOptions = computed(() => {\r\n  const options = [];\r\n  \r\n  for (const [section, nodes] of Object.entries(nodesConfig)) {\r\n    options.push({\r\n      type: 'group',\r\n      label: section.toUpperCase(),\r\n      key: section,\r\n      children: nodes.map(node => ({\r\n        label: `${section}_${node.name}`,\r\n        key: `${section}_${node.name}`,\r\n        nodeData: node\r\n      }))\r\n    });\r\n  }\r\n  \r\n  return options;\r\n});\r\n\r\nconst handleNodeSelect = (key: string, option: any) => {\r\n  emit('select', {\r\n    label: key,\r\n    params: option.nodeData.params\r\n  });\r\n  showMenu.value = false;\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(_unref(NDropdown), {\n    show: showMenu.value,\n    \"onUpdate:show\": _cache[0] || (_cache[0] = ($event: any) => ((showMenu).value = $event)),\n    options: nodeOptions.value,\n    x: __props.position.x,\n    y: __props.position.y,\n    placement: \"bottom-start\",\n    trigger: \"manual\",\n    onSelect: handleNodeSelect\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [\n      _createElementVNode(\"div\", { style: {\"position\":\"absolute\",\"left\":\"-9999px\"} }, null, -1)\n    ])),\n    _: 1,\n    __: [1]\n  }, 8, [\"show\", \"options\", \"x\", \"y\"]))\n}\n}\n\n})","<template>\r\n  <n-dropdown\r\n    v-model:show=\"showMenu\"\r\n    :options=\"nodeOptions\"\r\n    :x=\"position.x\"\r\n    :y=\"position.y\"\r\n    placement=\"bottom-start\"\r\n    trigger=\"manual\"\r\n    @select=\"handleNodeSelect\"\r\n  >\r\n    <div style=\"position: absolute; left: -9999px\"></div>\r\n  </n-dropdown>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, defineProps, defineEmits } from 'vue';\r\nimport { NDropdown } from 'naive-ui';\r\nimport nodesConfig from '../types/nodesConfig'\r\n\r\nconst props = defineProps({\r\n  show: Boolean,\r\n  position: {\r\n    type: Object,\r\n    default: () => ({ x: 0, y: 0 })\r\n  }\r\n});\r\n\r\nconst emit = defineEmits(['select', 'update:show']);\r\n\r\nconst showMenu = computed({\r\n  get: () => props.show,\r\n  set: (value) => emit('update:show', value)\r\n});\r\n\r\nconst nodeOptions = computed(() => {\r\n  const options = [];\r\n  \r\n  for (const [section, nodes] of Object.entries(nodesConfig)) {\r\n    options.push({\r\n      type: 'group',\r\n      label: section.toUpperCase(),\r\n      key: section,\r\n      children: nodes.map(node => ({\r\n        label: `${section}_${node.name}`,\r\n        key: `${section}_${node.name}`,\r\n        nodeData: node\r\n      }))\r\n    });\r\n  }\r\n  \r\n  return options;\r\n});\r\n\r\nconst handleNodeSelect = (key: string, option: any) => {\r\n  emit('select', {\r\n    label: key,\r\n    params: option.nodeData.params\r\n  });\r\n  showMenu.value = false;\r\n};\r\n</script>","import script from \"./NodeSelectionMenu.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NodeSelectionMenu.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { ref, computed, onMounted, nextTick } from 'vue';\r\nimport { VueFlow, Position, useVueFlow, addEdge, Edge } from '@vue-flow/core';\r\nimport '@vue-flow/core/dist/style.css';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { NLayoutContent } from 'naive-ui';\r\n\r\nimport ToolPanel from './ToolPanel.vue';\r\nimport NodeContextMenu from './NodeContextMenu.vue';\r\nimport NodeSelectionMenu from './NodeSelectionMenu.vue';\r\nimport CustomNode from '../types';\r\nimport config from '../types/nodesConfig';\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'FlowBuilder',\n  setup(__props) {\n\r\nconst elements = ref<Array<CustomNode | Edge>>([\r\n  { \r\n    id: 'start', \r\n    type: 'input', \r\n    data: { label: 'start', command: '', processFunction: async () => { console.log('start'); await delay(1000); } }, \r\n    position: { x: 50, y: 50 },\r\n    sourcePosition: Position.Bottom,\r\n    style: { \r\n      backgroundColor: '#d0d0d0', \r\n      color: 'black',\r\n      borderRadius: '10px',\r\n      width: '120px',\r\n      height: '60px'\r\n    },\r\n    draggable: true,\r\n    selectable: true,\r\n    deletable: false\r\n  },\r\n  { \r\n    id: 'end', \r\n    type: 'output', \r\n    data: { label: 'end', command: '', processFunction: async () => { console.log('end'); await delay(1000); } }, \r\n    position: { x: 500, y: 400 },\r\n    sourcePosition: Position.Top,\r\n    style: { \r\n      backgroundColor: '#454545', \r\n      color: 'white',\r\n      borderRadius: '10px',\r\n      width: '120px',\r\n      height: '60px'\r\n    },\r\n    draggable: true,\r\n    selectable: true,\r\n    deletable: false\r\n  },\r\n]);\r\n\r\nconst { \r\n  removeEdges, \r\n  addNodes, \r\n  updateNode, \r\n  removeNodes,\r\n  getEdges,\r\n  setNodes,\r\n  setEdges,\r\n  fitView\r\n} = useVueFlow();\r\n\r\nconst isRunning = ref(false);\r\nconst isStopped = ref(false);\r\nconst currentStep = ref<string | null>(null);\r\nconst selectedNode = ref<CustomNode | null>(null);\r\nconst selectedEdge = ref<Edge | null>(null);\r\nconst connectionMode = ref(false);\r\nconst flowWrapper = ref<HTMLElement | null>(null);\r\n\r\nconst contextMenuNode = ref<CustomNode | null>(null);\r\nconst showContextMenu = ref(false);\r\nconst contextMenuPosition = ref({ x: 0, y: 0 });\r\n\r\nconst showNodeMenu = ref(false);\r\nconst nodeMenuPosition = ref({ x: 0, y: 0 });\r\n\r\nconst stepCount = computed(() => {\r\n  let count = 0;\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    count++;\r\n    currentNode = nextNode;\r\n  }\r\n  \r\n  return count;\r\n});\r\n\r\nconst delay = (ms: number) => new Promise(res => setTimeout(res, ms));\r\n\r\nconst isProtectedNode = (nodeId: string) => {\r\n  return nodeId === 'start' || nodeId === 'end';\r\n};\r\n\r\nconst nodeClass = (node: CustomNode) => {\r\n  if (node.type === 'input') return 'input-node';\r\n  if (node.type === 'output') return 'output-node';\r\n  return 'default-node';\r\n};\r\n\r\nconst onPaneReady = ({ pane }: { pane?: HTMLElement }) => {\r\n  if (pane) {\r\n    pane.tabIndex = 0;\r\n    pane.focus();\r\n  }\r\n};\r\n\r\nconst handleKeyDown = (event: KeyboardEvent) => {\r\n  if ((event.ctrlKey || event.metaKey) && \r\n  (event.key === 'x' || event.key === 'ч')) {\r\n    event.preventDefault();\r\n    deleteSelectedNodeWithEdges();\r\n    deleteSelectedEdge();\r\n  }\r\n  if ((event.ctrlKey || event.metaKey) &&\r\n  (event.key === 'a' || event.key === 'ф')) {\r\n    event.preventDefault();\r\n    showNodeSelectionMenu();\r\n  }\r\n};\r\n\r\nconst deleteSelectedNodeWithEdges = () => {\r\n  if (!selectedNode.value || isProtectedNode(selectedNode.value.id)) {\r\n    console.warn('Нет выбранной ноды для удаления или нода защищена');\r\n    return;\r\n  }\r\n\r\n  const nodeId = selectedNode.value.id;\r\n  const edgesToRemove = getEdges.value.filter(\r\n    edge => edge.source === nodeId || edge.target === nodeId\r\n  );\r\n\r\n  if (edgesToRemove.length > 0) {\r\n    removeEdges(edgesToRemove);\r\n  }\r\n  \r\n  removeNodes([nodeId]);\r\n  elements.value = elements.value.filter(\r\n    el => el.id !== nodeId && \r\n    !edgesToRemove.some(edge => edge.id === el.id)\r\n  );\r\n  \r\n  selectedNode.value = null;\r\n  closeContextMenu();\r\n  updateStepNumbers();\r\n};\r\n\r\nconst showNodeSelectionMenu = (event?: MouseEvent) => {\r\n  if (event) {\r\n    nodeMenuPosition.value = {\r\n      x: event.clientX,\r\n      y: event.clientY\r\n    };\r\n  } else {\r\n    const centerX = window.innerWidth / 2;\r\n    const centerY = window.innerHeight / 2;\r\n    nodeMenuPosition.value = { x: centerX, y: centerY };\r\n  }\r\n  showNodeMenu.value = true;\r\n};\r\n\r\nconst addNode = (nodeData: { label: string, params: any[] }) => {\r\n  const newNodeId = uuidv4();\r\n  \r\n  const params = nodeData.params.reduce((acc, param) => {\r\n    acc[param.name] = param.default !== undefined ? param.default : '';\r\n    return acc;\r\n  }, {} as Record<string, any>);\r\n\r\n  const newNode: CustomNode = {\r\n    id: newNodeId,\r\n    data: { \r\n      label: nodeData.label,\r\n      command: '',\r\n      ...params,\r\n      processFunction: async () => { \r\n        console.log(`Выполняется шаг ${newNodeId}`); \r\n        await delay(1000); \r\n      } \r\n    },\r\n    position: { x: 100 + stepCount.value * 100, y: 150 },\r\n    targetPosition: Position.Top,\r\n    sourcePosition: Position.Bottom,\r\n    style: { \r\n      backgroundColor: '#2196F3', \r\n      color: 'white',\r\n      borderRadius: '50%',\r\n      width: '80px',\r\n      height: '80px'\r\n    }\r\n  };\r\n\r\n  elements.value.push(newNode);\r\n  addNodes([newNode]);\r\n  showNodeMenu.value = false;\r\n};\r\n\r\nconst onConnect = (params: any) => {\r\n  const newEdge = {\r\n    id: `edge-${params.source}-${params.target}`,\r\n    source: params.source,\r\n    target: params.target,\r\n  };\r\n  elements.value = addEdge(newEdge, elements.value);\r\n  connectionMode.value = false;\r\n  updateStepNumbers();\r\n};\r\n\r\nconst onNodeClick = (event: any) => {\r\n  if (connectionMode.value) return;\r\n  if (isProtectedNode(event.node.id)) {\r\n    selectedNode.value = null;\r\n    selectedEdge.value = null;\r\n    closeContextMenu();\r\n    return;\r\n  }\r\n  selectedNode.value = event.node;\r\n  selectedEdge.value = null;\r\n  closeContextMenu();\r\n};\r\n\r\nconst onEdgeClick = (event: any) => {\r\n  selectedNode.value = null;\r\n  selectedEdge.value = event.edge;\r\n  closeContextMenu();\r\n};\r\n\r\nconst onUpdateEdge = (event: any, edge: Edge) => {\r\n  console.log('onUpdateEdge', edge);\r\n}\r\n\r\nconst onNodeContextMenu = (event: { event: MouseEvent, node: CustomNode }) => {\r\n  if (!event?.node || isProtectedNode(event.node.id)) return;\r\n  \r\n  event.event.preventDefault();\r\n  \r\n  selectedNode.value = event.node;\r\n  contextMenuNode.value = event.node;\r\n  \r\n  const flowWrapperRect = flowWrapper.value?.getBoundingClientRect();\r\n  if (!flowWrapperRect) return;\r\n  \r\n  contextMenuPosition.value = {\r\n    x: event.event.clientX - flowWrapperRect.left,\r\n    y: event.event.clientY - flowWrapperRect.top\r\n  };\r\n  \r\n  showContextMenu.value = true;\r\n};\r\n\r\nconst onPaneClick = () => {\r\n  closeContextMenu();\r\n};\r\n\r\nconst closeContextMenu = () => {\r\n  contextMenuNode.value = null;\r\n};\r\n\r\nconst updateNodeLabel = (newLabel: string) => {\r\n  if (selectedNode.value && !isProtectedNode(selectedNode.value.id)) {\r\n    const nodeIndex = elements.value.findIndex(el => el.id === selectedNode.value?.id);\r\n    if (nodeIndex !== -1) {\r\n      (elements.value[nodeIndex] as CustomNode).data.label = newLabel;\r\n      updateNode(selectedNode.value.id, elements.value[nodeIndex]);\r\n    }\r\n  }\r\n};\r\n\r\nconst updateNodeCommand = (newCommand: string) => {\r\n  if (selectedNode.value && !isProtectedNode(selectedNode.value.id)) {\r\n    const nodeIndex = elements.value.findIndex(el => el.id === selectedNode.value?.id);\r\n    if (nodeIndex !== -1) {\r\n      (elements.value[nodeIndex] as CustomNode).data.command = newCommand;\r\n      updateNode(selectedNode.value.id, elements.value[nodeIndex]);\r\n    }\r\n  }\r\n};\r\n\r\nconst updateNodeParams = (newParams: Record<string, any>) => {\r\n  if (selectedNode.value) {\r\n    const nodeIndex = elements.value.findIndex(el => el.id === selectedNode.value?.id);\r\n    if (nodeIndex !== -1) {\r\n      const node = elements.value[nodeIndex] as CustomNode;\r\n      Object.keys(newParams).forEach(key => {\r\n        node.data[key] = newParams[key];\r\n      });\r\n      updateNode(node.id, node);\r\n    }\r\n  }\r\n};\r\n\r\nconst deleteSelectedEdge = () => {\r\n  if (selectedEdge.value) {\r\n    removeEdges([selectedEdge.value]);\r\n    elements.value = elements.value.filter(el => el.id !== selectedEdge.value?.id);\r\n    selectedEdge.value = null;\r\n    updateStepNumbers();\r\n  }\r\n}\r\n\r\nconst updateStepNumbers = () => {\r\n  // let stepNumber = 1;\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    \r\n    const node = elements.value.find(n => n.id === nextNode) as CustomNode;\r\n    if (node && !isProtectedNode(node.id)) {\r\n      updateNode(node.id, node);\r\n      // stepNumber++;\r\n    }\r\n    \r\n    currentNode = nextNode;\r\n  }\r\n};\r\n\r\nconst importJsonConfig = (jsonConfig: any) => {\r\n  try {\r\n    // guard expression\r\n    if (!jsonConfig?.steps || !Array.isArray(jsonConfig.steps)) {\r\n      throw new Error('Invalid configuration: missing steps array');\r\n    }\r\n\r\n    const newNodes: CustomNode[] = [];\r\n    const newEdges: Edge[] = [];\r\n    let xPos = 50;\r\n    const yPos = 150;\r\n\r\n    // start node\r\n    newNodes.push({\r\n      id: 'start',\r\n      type: 'input',\r\n      data: { label: 'start', command: '', processFunction: async () => await delay(1000) },\r\n      position: { x: xPos, y: 50 },\r\n      sourcePosition: Position.Bottom,\r\n      style: { \r\n        backgroundColor: '#d0d0d0',\r\n        color: 'black',\r\n        borderRadius: '10px',\r\n        width: '120px',\r\n        height: '60px'\r\n      },\r\n      draggable: true,\r\n      selectable: true,\r\n      deletable: false\r\n    });\r\n    xPos += 200;\r\n\r\n    // steps processing\r\n    jsonConfig.steps.forEach((step: any) => {\r\n      const nodeId = uuidv4();\r\n      const [nodeType, operationName] = step.name.split('_');\r\n      \r\n      const nodeData: any = {\r\n        label: step.name,\r\n        command: step.command || '',\r\n        processFunction: async () => await delay(1000)\r\n      };\r\n\r\n      const nodeConfig = config[nodeType]?.find(n => n.name === operationName);\r\n      if (nodeConfig) {\r\n        nodeConfig.params.forEach(param => {\r\n          nodeData[param.name] = step.params?.[param.name] ?? param.default;\r\n        });\r\n      }\r\n\r\n      // add node\r\n      newNodes.push({\r\n        id: nodeId,\r\n        data: nodeData,\r\n        position: { x: xPos, y: yPos },\r\n        targetPosition: Position.Top,\r\n        sourcePosition: Position.Bottom,\r\n        style: { \r\n          backgroundColor: '#2196F3',\r\n          color: 'white',\r\n          borderRadius: '50%',\r\n          width: '80px',\r\n          height: '80px'\r\n        },\r\n        draggable: true,\r\n        selectable: true,\r\n        deletable: true\r\n      });\r\n\r\n      // add edge\r\n      if (newNodes.length > 1) {\r\n        const prevNode = newNodes[newNodes.length-2];\r\n        newEdges.push({\r\n          id: `edge-${prevNode.id}-${nodeId}`,\r\n          source: prevNode.id,\r\n          target: nodeId,\r\n        });\r\n      }\r\n\r\n      xPos += 200;\r\n    });\r\n\r\n    // end node\r\n    newNodes.push({\r\n      id: 'end',\r\n      type: 'output',\r\n      data: { label: 'end', command: '', processFunction: async () => await delay(1000) },\r\n      position: { x: xPos, y: 50 },\r\n      sourcePosition: Position.Top,\r\n      style: { \r\n        backgroundColor: '#454545',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        width: '120px',\r\n        height: '60px'\r\n      },\r\n      draggable: true,\r\n      selectable: true,\r\n      deletable: false\r\n    });\r\n\r\n    // linking the last node to end\r\n    if (newNodes.length > 2) {\r\n      const lastStepNode = newNodes[newNodes.length-2];\r\n      newEdges.push({\r\n        id: `edge-${lastStepNode.id}-end`,\r\n        source: lastStepNode.id,\r\n        target: 'end',\r\n      });\r\n    }\r\n\r\n    // graph update\r\n    elements.value = [...newNodes, ...newEdges];\r\n    setNodes(newNodes);\r\n    setEdges(newEdges);\r\n\r\n    // auto-scaling\r\n    nextTick(() => fitView({ padding: 0.5 }));\r\n\r\n  } catch (error) {\r\n    console.error('Graph import error:', error);\r\n  }\r\n};\r\n\r\nconst startFlow = async () => {\r\n  isRunning.value = true;\r\n  isStopped.value = false;\r\n  currentStep.value = 'start';\r\n\r\n  try {\r\n    await executeStep('start');\r\n    let nextNode = getNextNode('start');\r\n\r\n    while (nextNode && isRunning.value) {\r\n      currentStep.value = nextNode;\r\n      await executeStep(nextNode);\r\n      nextNode = getNextNode(nextNode);\r\n    }\r\n\r\n    if (isRunning.value) {\r\n      currentStep.value = 'end';\r\n      await executeStep('end');\r\n    }\r\n  } catch (error) {\r\n    console.error('Ошибка выполнения графа:', error);\r\n  } finally {\r\n    isRunning.value = false;\r\n    currentStep.value = null;\r\n  }\r\n};\r\n\r\nconst stopFlow = () => {\r\n  isRunning.value = false;\r\n  isStopped.value = true;\r\n};\r\n\r\nconst continueFlow = async () => {\r\n  if (!currentStep.value) return;\r\n\r\n  isStopped.value = false;\r\n  isRunning.value = true;\r\n\r\n  try {\r\n    let nextNode = getNextNode(currentStep.value);\r\n\r\n    while (nextNode && isRunning.value) {\r\n      currentStep.value = nextNode;\r\n      await executeStep(nextNode);\r\n      nextNode = getNextNode(nextNode);\r\n    }\r\n\r\n    if (isRunning.value) {\r\n      currentStep.value = 'end';\r\n      await executeStep('end');\r\n    }\r\n  } catch (error) {\r\n    console.error('Ошибка выполнения графа:', error);\r\n  } finally {\r\n    isRunning.value = false;\r\n    isStopped.value = false;\r\n    currentStep.value = null;\r\n  }\r\n};\r\n\r\nconst resetFlow = () => {\r\n  isRunning.value = false;\r\n  isStopped.value = false;\r\n  currentStep.value = null;\r\n};\r\n\r\nconst executeStep = async (nodeId: string) => {\r\n  const node = elements.value.find((el: any) => el.id === nodeId) as CustomNode;\r\n  if (node?.data?.processFunction) {\r\n    await node.data.processFunction();\r\n  }\r\n};\r\n\r\nconst getNextNode = (nodeId: string): string | null => {\r\n  const edges = elements.value.filter((el: any) => el.source === nodeId && el.target) as Edge[];\r\n  return edges.length > 0 ? edges[0].target : null;\r\n};\r\n\r\nonMounted(() => {\r\n  if (flowWrapper.value) {\r\n    flowWrapper.value.focus();\r\n  }\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"flow-container\",\n    tabindex: \"0\",\n    onKeydown: handleKeyDown\n  }, [\n    _createVNode(_unref(NLayoutContent), null, {\n      default: _withCtx(() => [\n        _createVNode(ToolPanel, {\n          elements: elements.value,\n          \"is-running\": isRunning.value,\n          \"is-stopped\": isStopped.value,\n          \"selected-node\": selectedNode.value,\n          \"selected-edge\": selectedEdge.value,\n          onAddNode: showNodeSelectionMenu,\n          onStartFlow: startFlow,\n          onStopFlow: stopFlow,\n          onContinueFlow: continueFlow,\n          onResetFlow: resetFlow,\n          onUpdateNodeLabel: updateNodeLabel,\n          onUpdateNodeCommand: updateNodeCommand,\n          onDeleteSelectedEdge: deleteSelectedEdge,\n          onImportJson: importJsonConfig\n        }, null, 8, [\"elements\", \"is-running\", \"is-stopped\", \"selected-node\", \"selected-edge\"]),\n        _createElementVNode(\"div\", {\n          class: \"flow-wrapper\",\n          ref_key: \"flowWrapper\",\n          ref: flowWrapper\n        }, [\n          _createVNode(_unref(VueFlow), {\n            modelValue: elements.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((elements).value = $event)),\n            style: { width: '100%', height: '88vh', background: '#fcfcfc' },\n            onNodeClick: onNodeClick,\n            onEdgeClick: onEdgeClick,\n            onUpdateEdge: onUpdateEdge,\n            onNodeContextMenu: onNodeContextMenu,\n            onPaneClick: onPaneClick,\n            \"connection-mode\": connectionMode.value,\n            onConnect: onConnect,\n            onPaneReady: onPaneReady,\n            \"node-class\": nodeClass\n          }, null, 8, [\"modelValue\", \"connection-mode\"]),\n          (showContextMenu.value && contextMenuNode.value)\n            ? (_openBlock(), _createBlock(NodeContextMenu, {\n                key: 0,\n                node: contextMenuNode.value,\n                visible: showContextMenu.value,\n                x: contextMenuPosition.value.x,\n                y: contextMenuPosition.value.y,\n                \"onUpdate:visible\": _cache[1] || (_cache[1] = ($event: any) => (showContextMenu.value = $event)),\n                onUpdateLabel: updateNodeLabel,\n                onUpdateCommand: updateNodeCommand,\n                onUpdateParams: updateNodeParams\n              }, null, 8, [\"node\", \"visible\", \"x\", \"y\"]))\n            : _createCommentVNode(\"\", true),\n          (showNodeMenu.value)\n            ? (_openBlock(), _createBlock(NodeSelectionMenu, {\n                key: 1,\n                show: showNodeMenu.value,\n                position: nodeMenuPosition.value,\n                \"onUpdate:show\": _cache[2] || (_cache[2] = ($event: any) => (showNodeMenu.value = $event)),\n                onSelect: addNode\n              }, null, 8, [\"show\", \"position\"]))\n            : _createCommentVNode(\"\", true)\n        ], 512)\n      ]),\n      _: 1\n    })\n  ], 32))\n}\n}\n\n})","<template>\r\n  <div class=\"flow-container\" tabindex=\"0\" @keydown=\"handleKeyDown\">\r\n    <n-layout-content>\r\n      <ToolPanel\r\n        :elements=\"elements\"\r\n        :is-running=\"isRunning\"\r\n        :is-stopped=\"isStopped\"\r\n        :selected-node=\"selectedNode\"\r\n        :selected-edge=\"selectedEdge\"\r\n        @add-node=\"showNodeSelectionMenu\"\r\n        @start-flow=\"startFlow\"\r\n        @stop-flow=\"stopFlow\"\r\n        @continue-flow=\"continueFlow\"\r\n        @reset-flow=\"resetFlow\"\r\n        @update-node-label=\"updateNodeLabel\"\r\n        @update-node-command=\"updateNodeCommand\"\r\n        @delete-selected-edge=\"deleteSelectedEdge\"\r\n        @import-json=\"importJsonConfig\"\r\n      />\r\n\r\n      <div class=\"flow-wrapper\" ref=\"flowWrapper\">\r\n        <VueFlow\r\n          v-model=\"elements\"\r\n          :style=\"{ width: '100%', height: '88vh', background: '#fcfcfc' }\"\r\n          @node-click=\"onNodeClick\"\r\n          @edge-click=\"onEdgeClick\"\r\n          @update-edge=\"onUpdateEdge\"\r\n          @nodeContextMenu=\"onNodeContextMenu\"\r\n          @pane-click=\"onPaneClick\"\r\n          :connection-mode=\"connectionMode\"\r\n          @connect=\"onConnect\"\r\n          @pane-ready=\"onPaneReady\"\r\n          :node-class=\"nodeClass\"\r\n        >\r\n        </VueFlow>\r\n        <NodeContextMenu\r\n          v-if=\"showContextMenu && contextMenuNode\"\r\n          :node=\"contextMenuNode\"\r\n          :visible=\"showContextMenu\"\r\n          :x=\"contextMenuPosition.x\"\r\n          :y=\"contextMenuPosition.y\"\r\n          @update:visible=\"showContextMenu = $event\"\r\n          @update-label=\"updateNodeLabel\"\r\n          @update-command=\"updateNodeCommand\"\r\n          @update-params=\"updateNodeParams\"\r\n        />\r\n        <NodeSelectionMenu\r\n          v-if=\"showNodeMenu\"\r\n          :show=\"showNodeMenu\"\r\n          :position=\"nodeMenuPosition\"\r\n          @update:show=\"showNodeMenu = $event\"\r\n          @select=\"addNode\"\r\n        />\r\n      </div>\r\n    </n-layout-content>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted, nextTick } from 'vue';\r\nimport { VueFlow, Position, useVueFlow, addEdge, Edge } from '@vue-flow/core';\r\nimport '@vue-flow/core/dist/style.css';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { NLayoutContent } from 'naive-ui';\r\n\r\nimport ToolPanel from './ToolPanel.vue';\r\nimport NodeContextMenu from './NodeContextMenu.vue';\r\nimport NodeSelectionMenu from './NodeSelectionMenu.vue';\r\nimport CustomNode from '../types';\r\nimport config from '../types/nodesConfig';\r\n\r\nconst elements = ref<Array<CustomNode | Edge>>([\r\n  { \r\n    id: 'start', \r\n    type: 'input', \r\n    data: { label: 'start', command: '', processFunction: async () => { console.log('start'); await delay(1000); } }, \r\n    position: { x: 50, y: 50 },\r\n    sourcePosition: Position.Bottom,\r\n    style: { \r\n      backgroundColor: '#d0d0d0', \r\n      color: 'black',\r\n      borderRadius: '10px',\r\n      width: '120px',\r\n      height: '60px'\r\n    },\r\n    draggable: true,\r\n    selectable: true,\r\n    deletable: false\r\n  },\r\n  { \r\n    id: 'end', \r\n    type: 'output', \r\n    data: { label: 'end', command: '', processFunction: async () => { console.log('end'); await delay(1000); } }, \r\n    position: { x: 500, y: 400 },\r\n    sourcePosition: Position.Top,\r\n    style: { \r\n      backgroundColor: '#454545', \r\n      color: 'white',\r\n      borderRadius: '10px',\r\n      width: '120px',\r\n      height: '60px'\r\n    },\r\n    draggable: true,\r\n    selectable: true,\r\n    deletable: false\r\n  },\r\n]);\r\n\r\nconst { \r\n  removeEdges, \r\n  addNodes, \r\n  updateNode, \r\n  removeNodes,\r\n  getEdges,\r\n  setNodes,\r\n  setEdges,\r\n  fitView\r\n} = useVueFlow();\r\n\r\nconst isRunning = ref(false);\r\nconst isStopped = ref(false);\r\nconst currentStep = ref<string | null>(null);\r\nconst selectedNode = ref<CustomNode | null>(null);\r\nconst selectedEdge = ref<Edge | null>(null);\r\nconst connectionMode = ref(false);\r\nconst flowWrapper = ref<HTMLElement | null>(null);\r\n\r\nconst contextMenuNode = ref<CustomNode | null>(null);\r\nconst showContextMenu = ref(false);\r\nconst contextMenuPosition = ref({ x: 0, y: 0 });\r\n\r\nconst showNodeMenu = ref(false);\r\nconst nodeMenuPosition = ref({ x: 0, y: 0 });\r\n\r\nconst stepCount = computed(() => {\r\n  let count = 0;\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    count++;\r\n    currentNode = nextNode;\r\n  }\r\n  \r\n  return count;\r\n});\r\n\r\nconst delay = (ms: number) => new Promise(res => setTimeout(res, ms));\r\n\r\nconst isProtectedNode = (nodeId: string) => {\r\n  return nodeId === 'start' || nodeId === 'end';\r\n};\r\n\r\nconst nodeClass = (node: CustomNode) => {\r\n  if (node.type === 'input') return 'input-node';\r\n  if (node.type === 'output') return 'output-node';\r\n  return 'default-node';\r\n};\r\n\r\nconst onPaneReady = ({ pane }: { pane?: HTMLElement }) => {\r\n  if (pane) {\r\n    pane.tabIndex = 0;\r\n    pane.focus();\r\n  }\r\n};\r\n\r\nconst handleKeyDown = (event: KeyboardEvent) => {\r\n  if ((event.ctrlKey || event.metaKey) && \r\n  (event.key === 'x' || event.key === 'ч')) {\r\n    event.preventDefault();\r\n    deleteSelectedNodeWithEdges();\r\n    deleteSelectedEdge();\r\n  }\r\n  if ((event.ctrlKey || event.metaKey) &&\r\n  (event.key === 'a' || event.key === 'ф')) {\r\n    event.preventDefault();\r\n    showNodeSelectionMenu();\r\n  }\r\n};\r\n\r\nconst deleteSelectedNodeWithEdges = () => {\r\n  if (!selectedNode.value || isProtectedNode(selectedNode.value.id)) {\r\n    console.warn('Нет выбранной ноды для удаления или нода защищена');\r\n    return;\r\n  }\r\n\r\n  const nodeId = selectedNode.value.id;\r\n  const edgesToRemove = getEdges.value.filter(\r\n    edge => edge.source === nodeId || edge.target === nodeId\r\n  );\r\n\r\n  if (edgesToRemove.length > 0) {\r\n    removeEdges(edgesToRemove);\r\n  }\r\n  \r\n  removeNodes([nodeId]);\r\n  elements.value = elements.value.filter(\r\n    el => el.id !== nodeId && \r\n    !edgesToRemove.some(edge => edge.id === el.id)\r\n  );\r\n  \r\n  selectedNode.value = null;\r\n  closeContextMenu();\r\n  updateStepNumbers();\r\n};\r\n\r\nconst showNodeSelectionMenu = (event?: MouseEvent) => {\r\n  if (event) {\r\n    nodeMenuPosition.value = {\r\n      x: event.clientX,\r\n      y: event.clientY\r\n    };\r\n  } else {\r\n    const centerX = window.innerWidth / 2;\r\n    const centerY = window.innerHeight / 2;\r\n    nodeMenuPosition.value = { x: centerX, y: centerY };\r\n  }\r\n  showNodeMenu.value = true;\r\n};\r\n\r\nconst addNode = (nodeData: { label: string, params: any[] }) => {\r\n  const newNodeId = uuidv4();\r\n  \r\n  const params = nodeData.params.reduce((acc, param) => {\r\n    acc[param.name] = param.default !== undefined ? param.default : '';\r\n    return acc;\r\n  }, {} as Record<string, any>);\r\n\r\n  const newNode: CustomNode = {\r\n    id: newNodeId,\r\n    data: { \r\n      label: nodeData.label,\r\n      command: '',\r\n      ...params,\r\n      processFunction: async () => { \r\n        console.log(`Выполняется шаг ${newNodeId}`); \r\n        await delay(1000); \r\n      } \r\n    },\r\n    position: { x: 100 + stepCount.value * 100, y: 150 },\r\n    targetPosition: Position.Top,\r\n    sourcePosition: Position.Bottom,\r\n    style: { \r\n      backgroundColor: '#2196F3', \r\n      color: 'white',\r\n      borderRadius: '50%',\r\n      width: '80px',\r\n      height: '80px'\r\n    }\r\n  };\r\n\r\n  elements.value.push(newNode);\r\n  addNodes([newNode]);\r\n  showNodeMenu.value = false;\r\n};\r\n\r\nconst onConnect = (params: any) => {\r\n  const newEdge = {\r\n    id: `edge-${params.source}-${params.target}`,\r\n    source: params.source,\r\n    target: params.target,\r\n  };\r\n  elements.value = addEdge(newEdge, elements.value);\r\n  connectionMode.value = false;\r\n  updateStepNumbers();\r\n};\r\n\r\nconst onNodeClick = (event: any) => {\r\n  if (connectionMode.value) return;\r\n  if (isProtectedNode(event.node.id)) {\r\n    selectedNode.value = null;\r\n    selectedEdge.value = null;\r\n    closeContextMenu();\r\n    return;\r\n  }\r\n  selectedNode.value = event.node;\r\n  selectedEdge.value = null;\r\n  closeContextMenu();\r\n};\r\n\r\nconst onEdgeClick = (event: any) => {\r\n  selectedNode.value = null;\r\n  selectedEdge.value = event.edge;\r\n  closeContextMenu();\r\n};\r\n\r\nconst onUpdateEdge = (event: any, edge: Edge) => {\r\n  console.log('onUpdateEdge', edge);\r\n}\r\n\r\nconst onNodeContextMenu = (event: { event: MouseEvent, node: CustomNode }) => {\r\n  if (!event?.node || isProtectedNode(event.node.id)) return;\r\n  \r\n  event.event.preventDefault();\r\n  \r\n  selectedNode.value = event.node;\r\n  contextMenuNode.value = event.node;\r\n  \r\n  const flowWrapperRect = flowWrapper.value?.getBoundingClientRect();\r\n  if (!flowWrapperRect) return;\r\n  \r\n  contextMenuPosition.value = {\r\n    x: event.event.clientX - flowWrapperRect.left,\r\n    y: event.event.clientY - flowWrapperRect.top\r\n  };\r\n  \r\n  showContextMenu.value = true;\r\n};\r\n\r\nconst onPaneClick = () => {\r\n  closeContextMenu();\r\n};\r\n\r\nconst closeContextMenu = () => {\r\n  contextMenuNode.value = null;\r\n};\r\n\r\nconst updateNodeLabel = (newLabel: string) => {\r\n  if (selectedNode.value && !isProtectedNode(selectedNode.value.id)) {\r\n    const nodeIndex = elements.value.findIndex(el => el.id === selectedNode.value?.id);\r\n    if (nodeIndex !== -1) {\r\n      (elements.value[nodeIndex] as CustomNode).data.label = newLabel;\r\n      updateNode(selectedNode.value.id, elements.value[nodeIndex]);\r\n    }\r\n  }\r\n};\r\n\r\nconst updateNodeCommand = (newCommand: string) => {\r\n  if (selectedNode.value && !isProtectedNode(selectedNode.value.id)) {\r\n    const nodeIndex = elements.value.findIndex(el => el.id === selectedNode.value?.id);\r\n    if (nodeIndex !== -1) {\r\n      (elements.value[nodeIndex] as CustomNode).data.command = newCommand;\r\n      updateNode(selectedNode.value.id, elements.value[nodeIndex]);\r\n    }\r\n  }\r\n};\r\n\r\nconst updateNodeParams = (newParams: Record<string, any>) => {\r\n  if (selectedNode.value) {\r\n    const nodeIndex = elements.value.findIndex(el => el.id === selectedNode.value?.id);\r\n    if (nodeIndex !== -1) {\r\n      const node = elements.value[nodeIndex] as CustomNode;\r\n      Object.keys(newParams).forEach(key => {\r\n        node.data[key] = newParams[key];\r\n      });\r\n      updateNode(node.id, node);\r\n    }\r\n  }\r\n};\r\n\r\nconst deleteSelectedEdge = () => {\r\n  if (selectedEdge.value) {\r\n    removeEdges([selectedEdge.value]);\r\n    elements.value = elements.value.filter(el => el.id !== selectedEdge.value?.id);\r\n    selectedEdge.value = null;\r\n    updateStepNumbers();\r\n  }\r\n}\r\n\r\nconst updateStepNumbers = () => {\r\n  // let stepNumber = 1;\r\n  let currentNode = 'start';\r\n  \r\n  while (currentNode !== 'end') {\r\n    const nextNode = getNextNode(currentNode);\r\n    if (!nextNode || nextNode === 'end') break;\r\n    \r\n    const node = elements.value.find(n => n.id === nextNode) as CustomNode;\r\n    if (node && !isProtectedNode(node.id)) {\r\n      updateNode(node.id, node);\r\n      // stepNumber++;\r\n    }\r\n    \r\n    currentNode = nextNode;\r\n  }\r\n};\r\n\r\nconst importJsonConfig = (jsonConfig: any) => {\r\n  try {\r\n    // guard expression\r\n    if (!jsonConfig?.steps || !Array.isArray(jsonConfig.steps)) {\r\n      throw new Error('Invalid configuration: missing steps array');\r\n    }\r\n\r\n    const newNodes: CustomNode[] = [];\r\n    const newEdges: Edge[] = [];\r\n    let xPos = 50;\r\n    const yPos = 150;\r\n\r\n    // start node\r\n    newNodes.push({\r\n      id: 'start',\r\n      type: 'input',\r\n      data: { label: 'start', command: '', processFunction: async () => await delay(1000) },\r\n      position: { x: xPos, y: 50 },\r\n      sourcePosition: Position.Bottom,\r\n      style: { \r\n        backgroundColor: '#d0d0d0',\r\n        color: 'black',\r\n        borderRadius: '10px',\r\n        width: '120px',\r\n        height: '60px'\r\n      },\r\n      draggable: true,\r\n      selectable: true,\r\n      deletable: false\r\n    });\r\n    xPos += 200;\r\n\r\n    // steps processing\r\n    jsonConfig.steps.forEach((step: any) => {\r\n      const nodeId = uuidv4();\r\n      const [nodeType, operationName] = step.name.split('_');\r\n      \r\n      const nodeData: any = {\r\n        label: step.name,\r\n        command: step.command || '',\r\n        processFunction: async () => await delay(1000)\r\n      };\r\n\r\n      const nodeConfig = config[nodeType]?.find(n => n.name === operationName);\r\n      if (nodeConfig) {\r\n        nodeConfig.params.forEach(param => {\r\n          nodeData[param.name] = step.params?.[param.name] ?? param.default;\r\n        });\r\n      }\r\n\r\n      // add node\r\n      newNodes.push({\r\n        id: nodeId,\r\n        data: nodeData,\r\n        position: { x: xPos, y: yPos },\r\n        targetPosition: Position.Top,\r\n        sourcePosition: Position.Bottom,\r\n        style: { \r\n          backgroundColor: '#2196F3',\r\n          color: 'white',\r\n          borderRadius: '50%',\r\n          width: '80px',\r\n          height: '80px'\r\n        },\r\n        draggable: true,\r\n        selectable: true,\r\n        deletable: true\r\n      });\r\n\r\n      // add edge\r\n      if (newNodes.length > 1) {\r\n        const prevNode = newNodes[newNodes.length-2];\r\n        newEdges.push({\r\n          id: `edge-${prevNode.id}-${nodeId}`,\r\n          source: prevNode.id,\r\n          target: nodeId,\r\n        });\r\n      }\r\n\r\n      xPos += 200;\r\n    });\r\n\r\n    // end node\r\n    newNodes.push({\r\n      id: 'end',\r\n      type: 'output',\r\n      data: { label: 'end', command: '', processFunction: async () => await delay(1000) },\r\n      position: { x: xPos, y: 50 },\r\n      sourcePosition: Position.Top,\r\n      style: { \r\n        backgroundColor: '#454545',\r\n        color: 'white',\r\n        borderRadius: '10px',\r\n        width: '120px',\r\n        height: '60px'\r\n      },\r\n      draggable: true,\r\n      selectable: true,\r\n      deletable: false\r\n    });\r\n\r\n    // linking the last node to end\r\n    if (newNodes.length > 2) {\r\n      const lastStepNode = newNodes[newNodes.length-2];\r\n      newEdges.push({\r\n        id: `edge-${lastStepNode.id}-end`,\r\n        source: lastStepNode.id,\r\n        target: 'end',\r\n      });\r\n    }\r\n\r\n    // graph update\r\n    elements.value = [...newNodes, ...newEdges];\r\n    setNodes(newNodes);\r\n    setEdges(newEdges);\r\n\r\n    // auto-scaling\r\n    nextTick(() => fitView({ padding: 0.5 }));\r\n\r\n  } catch (error) {\r\n    console.error('Graph import error:', error);\r\n  }\r\n};\r\n\r\nconst startFlow = async () => {\r\n  isRunning.value = true;\r\n  isStopped.value = false;\r\n  currentStep.value = 'start';\r\n\r\n  try {\r\n    await executeStep('start');\r\n    let nextNode = getNextNode('start');\r\n\r\n    while (nextNode && isRunning.value) {\r\n      currentStep.value = nextNode;\r\n      await executeStep(nextNode);\r\n      nextNode = getNextNode(nextNode);\r\n    }\r\n\r\n    if (isRunning.value) {\r\n      currentStep.value = 'end';\r\n      await executeStep('end');\r\n    }\r\n  } catch (error) {\r\n    console.error('Ошибка выполнения графа:', error);\r\n  } finally {\r\n    isRunning.value = false;\r\n    currentStep.value = null;\r\n  }\r\n};\r\n\r\nconst stopFlow = () => {\r\n  isRunning.value = false;\r\n  isStopped.value = true;\r\n};\r\n\r\nconst continueFlow = async () => {\r\n  if (!currentStep.value) return;\r\n\r\n  isStopped.value = false;\r\n  isRunning.value = true;\r\n\r\n  try {\r\n    let nextNode = getNextNode(currentStep.value);\r\n\r\n    while (nextNode && isRunning.value) {\r\n      currentStep.value = nextNode;\r\n      await executeStep(nextNode);\r\n      nextNode = getNextNode(nextNode);\r\n    }\r\n\r\n    if (isRunning.value) {\r\n      currentStep.value = 'end';\r\n      await executeStep('end');\r\n    }\r\n  } catch (error) {\r\n    console.error('Ошибка выполнения графа:', error);\r\n  } finally {\r\n    isRunning.value = false;\r\n    isStopped.value = false;\r\n    currentStep.value = null;\r\n  }\r\n};\r\n\r\nconst resetFlow = () => {\r\n  isRunning.value = false;\r\n  isStopped.value = false;\r\n  currentStep.value = null;\r\n};\r\n\r\nconst executeStep = async (nodeId: string) => {\r\n  const node = elements.value.find((el: any) => el.id === nodeId) as CustomNode;\r\n  if (node?.data?.processFunction) {\r\n    await node.data.processFunction();\r\n  }\r\n};\r\n\r\nconst getNextNode = (nodeId: string): string | null => {\r\n  const edges = elements.value.filter((el: any) => el.source === nodeId && el.target) as Edge[];\r\n  return edges.length > 0 ? edges[0].target : null;\r\n};\r\n\r\nonMounted(() => {\r\n  if (flowWrapper.value) {\r\n    flowWrapper.value.focus();\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.flow-container {\r\n  font-family: sans-serif;\r\n  height: 100vh;\r\n  outline: none;\r\n}\r\n\r\n.flow-wrapper {\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  outline: none;\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.node-context-menu {\r\n  position: absolute;\r\n}\r\n\r\n.node-edit-form {\r\n  padding: 20px;\r\n}\r\n</style>\r\n\r\n<style>\r\n.vue-flow__node {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.vue-flow__node.input-node {\r\n  background-color: #d0d0d0 !important;\r\n  border-radius: 10px !important;\r\n  width: 120px !important;\r\n  height: 60px !important;\r\n}\r\n\r\n.vue-flow__node.output-node {\r\n  background-color: #454545 !important;\r\n  border-radius: 10px !important;\r\n  width: 120px !important;\r\n  height: 60px !important;\r\n}\r\n\r\n.vue-flow__node.default-node {\r\n  background-color: #2196F3 !important;\r\n  border-radius: 50% !important;\r\n  width: 80px !important;\r\n  height: 80px !important;\r\n}\r\n\r\n.vue-flow__node.selected {\r\n  box-shadow: 0 0 0 2px #555;\r\n}\r\n\r\n.vue-flow__edge-path {\r\n  stroke: #555;\r\n  stroke-width: 2;\r\n}\r\n\r\n.vue-flow__handle {\r\n  width: 10px;\r\n  height: 7px;\r\n  background-color: #555;\r\n}\r\n\r\n.vue-flow__handle-bottom {\r\n  bottom: -5px;\r\n}\r\n\r\n.vue-flow__handle-top {\r\n  top: -5px;\r\n}\r\n\r\n.vue-flow__handle-left {\r\n  left: -5px;\r\n}\r\n\r\n.vue-flow__handle-right {\r\n  right: -5px;\r\n}\r\n</style>","import script from \"./FlowBuilder.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FlowBuilder.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FlowBuilder.vue?vue&type=style&index=0&id=7c583e83&scoped=true&lang=css\"\nimport \"./FlowBuilder.vue?vue&type=style&index=1&id=7c583e83&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7c583e83\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport {\r\n  // NLayoutHeader,\r\n  // NH1,\r\n  // NSpace,\r\n} from 'naive-ui';\r\n  import FlowBuilder from './components/FlowBuilder.vue';\r\n\r\n  import hljs from 'highlight.js/lib/core'\r\n  import javascript from 'highlight.js/lib/languages/javascript'\r\n\r\n  \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\r\nhljs.registerLanguage('javascript', javascript);\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_n_message_provider = _resolveComponent(\"n-message-provider\")!\n  const _component_n_config_provider = _resolveComponent(\"n-config-provider\")!\n\n  return (_openBlock(), _createBlock(_component_n_config_provider, { hljs: _unref(hljs) }, {\n    default: _withCtx(() => [\n      _createVNode(_component_n_message_provider, null, {\n        default: _withCtx(() => [\n          _createVNode(FlowBuilder)\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"hljs\"]))\n}\n}\n\n})","<template>\r\n  <!-- <n-layout-header bordered>\r\n    <n-space justify=\"space-between\" align=\"center\" style=\"padding: 0 20px\">\r\n      <n-h1 style=\"margin: 0\">Flow Builder</n-h1>\r\n    </n-space>\r\n  </n-layout-header> -->\r\n  <n-config-provider :hljs=\"hljs\">\r\n    <n-message-provider>\r\n      <FlowBuilder />\r\n    </n-message-provider>\r\n  </n-config-provider>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport {\r\n  // NLayoutHeader,\r\n  // NH1,\r\n  // NSpace,\r\n} from 'naive-ui';\r\n  import FlowBuilder from './components/FlowBuilder.vue';\r\n\r\n  import hljs from 'highlight.js/lib/core'\r\n  import javascript from 'highlight.js/lib/languages/javascript'\r\n\r\n  hljs.registerLanguage('javascript', javascript);\r\n</script>\r\n","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","export default {\r\n  beforeMount(el, binding) {\r\n    el.clickOutsideEvent = function(event) {\r\n      if (!(el === event.target || el.contains(event.target))) {\r\n        binding.value(event);\r\n      }\r\n    };\r\n    document.body.addEventListener('click', el.clickOutsideEvent);\r\n  },\r\n  unmounted(el) {\r\n    document.body.removeEventListener('click', el.clickOutsideEvent);\r\n  }\r\n};","import { createApp } from 'vue';\r\nimport App from './App.vue';\r\nimport clickOutside from './directives/clickOutside';\r\nimport naive from 'naive-ui';\r\n\r\nconst app = createApp(App);\r\napp.directive('click-outside', clickOutside);\r\napp.use(naive)\r\n\r\napp.mount('#app');\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkflow_builder\"] = self[\"webpackChunkflow_builder\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(8051); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["config","proc","name","params","type","required","enum","default","bx24","pathsData","question","d","fill","settings","plus","play","pause","delete","refresh","code","download","upload","edit","props","size","Number","String","color","viewBox","paths","Array","setup","h","xmlns","width","height","focusable","map","pathAttrs","__exports__","_hoisted_1","class","_defineComponent","__name","elements","isRunning","Boolean","isStopped","selectedNode","Object","selectedEdge","emits","__props","emit","__emit","getEdges","useVueFlow","message","useMessage","fileInput","ref","createIcon","iconName","iconPaths","CustomIcon","QuestionIcon","PlusIcon","PlayIcon","PauseIcon","DeleteIcon","RefreshIcon","CodeIcon","DownloadIcon","UploadIcon","EditIcon","flowName","flowDescription","daguYaml","pipelineJson","showPipelineJson","showDaguYaml","showHints","isGraphValid","computed","visited","Set","currentNode","has","add","edgesFromCurrent","value","filter","e","source","length","target","getNextNode","nodeId","edges","el","generateDAGUYaml","steps","nextNode","node","find","n","id","isProtectedNode","push","data","label","command","daguConfig","description","YAML","generatePipelineJson","step","split","nodeType","operationName","nodeConfig","forEach","param","undefined","pipelineConfig","JSON","stringify","downloadDAGUYaml","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","replace","body","appendChild","click","removeChild","revokeObjectURL","downloadPipelineJson","triggerFileInput","handleFileSelect","async","input","event","files","file","content","readFileAsText","jsonConfig","parse","Error","success","error","console","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsText","_ctx","_cache","_openBlock","_createElementBlock","_createVNode","_unref","NSpace","justify","align","style","_withCtx","NText","strong","_createTextVNode","_toDisplayString","_","NPopover","trigger","NButton","text","NIcon","NCard","title","NForm","NFormItem","path","NInput","$event","placeholder","onClick","$emit","circle","icon","disabled","_createBlock","key","_createCommentVNode","_Fragment","show","ghost","__","NCode","language","_createElementVNode","ref_key","accept","onChange","NList","NListItem","visible","x","y","localLabel","localCommand","localParams","nodeParams","operations","nodesConfig","operation","op","watch","newNode","immediate","positionStyle","left","top","position","zIndex","saveAndClose","paramsToUpdate","_normalizeStyle","onBlur","updateLabel","updateCommand","_renderList","NSelect","options","NSwitch","NInputNumber","showMenu","get","set","nodeOptions","section","nodes","entries","toUpperCase","children","nodeData","handleNodeSelect","option","NDropdown","placement","onSelect","processFunction","log","delay","sourcePosition","Position","Bottom","backgroundColor","borderRadius","draggable","selectable","deletable","Top","removeEdges","addNodes","updateNode","removeNodes","setNodes","setEdges","fitView","currentStep","connectionMode","flowWrapper","contextMenuNode","showContextMenu","contextMenuPosition","showNodeMenu","nodeMenuPosition","stepCount","count","ms","res","setTimeout","nodeClass","onPaneReady","pane","tabIndex","focus","handleKeyDown","ctrlKey","metaKey","preventDefault","deleteSelectedNodeWithEdges","deleteSelectedEdge","showNodeSelectionMenu","warn","edgesToRemove","edge","some","closeContextMenu","updateStepNumbers","clientX","clientY","centerX","window","innerWidth","centerY","innerHeight","addNode","newNodeId","uuidv4","reduce","acc","targetPosition","onConnect","newEdge","addEdge","onNodeClick","onEdgeClick","onUpdateEdge","onNodeContextMenu","flowWrapperRect","getBoundingClientRect","onPaneClick","updateNodeLabel","newLabel","nodeIndex","findIndex","updateNodeCommand","newCommand","updateNodeParams","newParams","keys","importJsonConfig","isArray","newNodes","newEdges","xPos","yPos","prevNode","lastStepNode","nextTick","padding","startFlow","executeStep","stopFlow","continueFlow","resetFlow","onMounted","tabindex","onKeydown","NLayoutContent","ToolPanel","onAddNode","onStartFlow","onStopFlow","onContinueFlow","onResetFlow","onUpdateNodeLabel","onUpdateNodeCommand","onDeleteSelectedEdge","onImportJson","VueFlow","modelValue","background","NodeContextMenu","onUpdateLabel","onUpdateCommand","onUpdateParams","NodeSelectionMenu","hljs","registerLanguage","javascript","_component_n_message_provider","_resolveComponent","_component_n_config_provider","FlowBuilder","beforeMount","binding","clickOutsideEvent","contains","addEventListener","unmounted","removeEventListener","app","createApp","App","directive","clickOutside","use","naive","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}